# CPU ржПрж░ ржЧржаржи ржУ ржХрж╛рж░рзНржпржкрзНрж░ржгрж╛рж▓рзА
## Chapter 04: CPU Architecture and Organization

---

## ЁЯУМ CPU ржХрзА?

CPU (Central Processing Unit) рж╣рж▓рзЛ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ ржорж╕рзНрждрж┐рж╖рзНржХ ржпрж╛ рж╕ржХрж▓ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗред

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ                          CPU                                тФВ
тФВ  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР  тФВ
тФВ  тФВ   Control Unit   тФВ    тФВ    Arithmetic Logic Unit     тФВ  тФВ
тФВ  тФВ  - Fetch         тФВ    тФВ  - Addition, Subtraction     тФВ  тФВ
тФВ  тФВ  - Decode        тФВ    тФВ  - Multiplication, Division  тФВ  тФВ
тФВ  тФВ  - Execute       тФВ    тФВ  - AND, OR, NOT, XOR         тФВ  тФВ
тФВ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ  тФВ
тФВ  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФРтФВ
тФВ  тФВ                     Registers                          тФВтФВ
тФВ  тФВ  PC | IR | MAR | MDR | ACC | SP | FLAGS | GPR...      тФВтФВ
тФВ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШтФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

---

## ЁЯзй CPU ржПрж░ ржкрзНрж░ржзрж╛ржи ржЙржкрж╛ржжрж╛ржи

### рзз. ржХржирзНржЯрзНрж░рзЛрж▓ ржЗржЙржирж┐ржЯ (CU)
- ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржи ржлрзЗржЪ ржУ ржбрж┐ржХрзЛржб ржХрж░рзЗ
- ржПржХрзНрж╕рж┐ржХрж┐ржЙрж╢ржи ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗ
- ржЯрж╛ржЗржорж┐ржВ рж╕рж┐ржЧржирзНржпрж╛рж▓ ржЙрзОржкрж╛ржжржи ржХрж░рзЗ

**ржкрзНрж░ржХрж╛рж░:**
- **Hardwired**: ржжрзНрж░рзБржд, RISC ржкрзНрж░рж╕рзЗрж╕рж░рзЗ
- **Microprogrammed**: ржиржоржирзАржпрж╝, CISC ржкрзНрж░рж╕рзЗрж╕рж░рзЗ

### рзи. ALU (Arithmetic Logic Unit)
ржЧрж╛ржгрж┐рждрж┐ржХ ржУ ржпрзМржХрзНрждрж┐ржХ ржЕржкрж╛рж░рзЗрж╢ржи рж╕ржорзНржкрж╛ржжржи ржХрж░рзЗред

### рзй. рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░
CPU ржПрж░ ржЕрждрж┐ ржжрзНрж░рзБржд ржорзЗржорзЛрж░рж┐ред

| рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ | ржХрж╛ржЬ |
|-----------|-----|
| PC | ржкрж░ржмрж░рзНрждрзА ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржирзЗрж░ ржарж┐ржХрж╛ржирж╛ |
| IR | ржмрж░рзНрждржорж╛ржи ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржи ржзрж╛рж░ржг |
| MAR | ржорзЗржорзЛрж░рж┐ ржарж┐ржХрж╛ржирж╛ ржзрж╛рж░ржг |
| MDR | ржорзЗржорзЛрж░рж┐ ржбрж╛ржЯрж╛ ржзрж╛рж░ржг |
| ACC | ржЧржгржирж╛рж░ ржлрж▓рж╛ржлрж▓ |
| SP | рж╕рзНржЯрзНржпрж╛ржХрзЗрж░ рж╢рзАрж░рзНрж╖ ржарж┐ржХрж╛ржирж╛ |
| FLAGS | ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржЕржмрж╕рзНржерж╛ |

---

## ЁЯФД ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржи рж╕рж╛ржЗржХрзЗрж▓

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  FETCH   тФВтФАтФАтФАтЦ╢тФВ  DECODE  тФВтФАтФАтФАтЦ╢тФВ EXECUTE  тФВтФАтФАтФАтЦ╢тФВ  STORE   тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

### ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржзрж╛ржк

```
1. FETCH (ржЖржиржпрж╝ржи):
   MAR тЖР PC
   MDR тЖР Memory[MAR]
   IR тЖР MDR
   PC тЖР PC + 1

2. DECODE (ржмрзНржпрж╛ржЦрзНржпрж╛):
   - Opcode рж╢ржирж╛ржХрзНржд
   - Operand address ржЧржгржирж╛

3. EXECUTE (рж╕ржорзНржкрж╛ржжржи):
   - ALU ржЕржкрж╛рж░рзЗрж╢ржи

4. STORE/WRITE BACK:
   - ржлрж▓рж╛ржлрж▓ рж╕ржВрж░ржХрзНрж╖ржг
```

---

## ЁЯУК ржбрж╛ржЯрж╛ржкрж╛рже

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ                         CPU DATAPATH                         тФВ
тФВ    тФМтФАтФАтФАтФАтФАтФАтФР     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР       тФВ
тФВ    тФВ  PC  тФВтФАтФАтФАтФАтЦ╢тФВ  Instruction тФВтФАтФАтФАтФАтЦ╢тФВ   InstructionтФВ       тФВ
тФВ    тФВ      тФВ     тФВ    Memory    тФВ     тФВ    Register  тФВ       тФВ
тФВ    тФФтФАтФАтФАтФАтФАтФАтФШ     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ       тФВ
тФВ    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР              тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР           тФВ
тФВ    тФВ   Register   тФВтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтЦ╢тФВ     ALU      тФВтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╢тФВ
тФВ    тФВ     File     тФВ      тФВ       тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ           тФВ
тФВ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ      тФВ              тФВ                   тФВ
тФВ           тЦ▓              тЦ╝              тЦ╝                   тФВ
тФВ    тФМтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР         тФВ
тФВ    тФВ                Data Memory                    тФВ         тФВ
тФВ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ         тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

---

## тЪб ржХрзНрж▓ржХ ржУ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕

### CPU ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ рж╕ржорзАржХрж░ржг

```
CPU Time = Instruction Count ├Ч CPI ├Ч Clock Period
         = IC ├Ч CPI ├Ч (1/f)

CPI = Cycles Per Instruction
IC = Instruction Count
f = Clock Frequency
```

### MIPS (Million Instructions Per Second)
```
MIPS = Clock Frequency / (CPI ├Ч 10тБ╢)
```

---

## ЁЯФМ ржмрж╛рж╕ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░

### рж╕рж┐ржЩрзНржЧрзЗрж▓ ржмрж╛рж╕
```
тФМтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФР
тФВ PC  тФВ  тФВ IR  тФВ  тФВ MAR тФВ  тФВ ALU тФВ
тФФтФАтФАтФмтФАтФАтФШ  тФФтФАтФАтФмтФАтФАтФШ  тФФтФАтФАтФмтФАтФАтФШ  тФФтФАтФАтФмтФАтФАтФШ
   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФШ
              Single Bus
```

### ржерзНрж░рж┐-ржмрж╛рж╕
- Bus A: Source 1
- Bus B: Source 2
- Bus C: Result

---

## тЬПя╕П ржЕржирзБрж╢рзАрж▓ржирзА

1. CU ржУ ALU ржПрж░ ржкрж╛рж░рзНржержХрзНржп ржХрзА?
2. IC=10тБ╣, CPI=2, f=3GHz рж╣рж▓рзЗ CPU Time ржХржд?
3. Instruction Cycle ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзБржиред

---

## ЁЯУЪ ржкрж░ржмрж░рзНрждрзА ржЕржзрзНржпрж╛ржпрж╝
[ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржи рж╕рзЗржЯ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░](./02-ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржи-рж╕рзЗржЯ-ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░.md)
