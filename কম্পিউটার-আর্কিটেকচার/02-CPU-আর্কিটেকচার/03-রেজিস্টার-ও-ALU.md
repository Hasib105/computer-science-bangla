# рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржУ ALU
## Chapter 06: Registers and Arithmetic Logic Unit

---

## ЁЯУМ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░

рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ рж╣рж▓рзЛ CPU ржПрж░ ржЕрждрж┐ ржжрзНрж░рзБржд ржЧрждрж┐рж░ ржХрзНрж╖рзБржжрзНрж░ ржорзЗржорзЛрж░рж┐ред

```
рж╕рзНржкрж┐ржб рждрзБрж▓ржирж╛:
Register тФВтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВ 1 cycle
L1 Cache тФВтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВ      4 cycles
RAM      тФВтЦИтЦИтЦИтЦИтФВ                    200 cycles
```

---

## ЁЯУЛ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░рзЗрж░ ржкрзНрж░ржХрж╛рж░

### General Purpose Registers (GPR)

#### x86-64
```
RAX, RBX, RCX, RDX, RSI, RDI, RBP, RSP, R8-R15

тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ                   RAX (64-bit)                   тФВ
тФВ              тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР             тФВ
тФВ              тФВ   EAX (32-bit)     тФВ             тФВ
тФВ              тФВ    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФВ             тФВ
тФВ              тФВ    тФВAX (16-bit)тФВ   тФВ             тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

#### ARM
```
R0-R12  : General Purpose
R13 (SP): Stack Pointer
R14 (LR): Link Register
R15 (PC): Program Counter
```

### Special Purpose Registers

| Register | ржХрж╛ржЬ |
|----------|-----|
| PC | ржкрж░ржмрж░рзНрждрзА ржЗржирзНрж╕ржЯрзНрж░рж╛ржХрж╢ржирзЗрж░ ржарж┐ржХрж╛ржирж╛ |
| SP | рж╕рзНржЯрзНржпрж╛ржХрзЗрж░ рж╢рзАрж░рзНрж╖ |
| FLAGS | Z, C, S, O flags |

### FLAGS Register
```
тФМтФАтФАтФАтФмтФАтФАтФАтФмтФАтФАтФАтФмтФАтФАтФАтФмтФАтФАтФАтФмтФАтФАтФАтФР
тФВ O тФВ S тФВ Z тФВ A тФВ P тФВ C тФВ
тФФтФАтФАтФАтФ┤тФАтФАтФАтФ┤тФАтФАтФАтФ┤тФАтФАтФАтФ┤тФАтФАтФАтФ┤тФАтФАтФАтФШ
Z = Zero, C = Carry, S = Sign, O = Overflow
```

---

## ЁЯФз ALU

### ALU ржЕржкрж╛рж░рзЗрж╢ржи

```
           тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
Operand AтФАтЦ╢тФВ                                 тФВ
           тФВ           ALU                   тФВтФАтФАтЦ╢ Result
Operand BтФАтЦ╢тФВ                                 тФВ
           тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                          тФВ
                          тЦ╝
                    Status Flags
```

### ржЧрж╛ржгрж┐рждрж┐ржХ ржЕржкрж╛рж░рзЗрж╢ржи
```
ADD, SUB, MUL, DIV, INC, DEC, NEG
```

### рж▓ржЬрж┐ржХрзНржпрж╛рж▓ ржЕржкрж╛рж░рзЗрж╢ржи
```
AND:  1010 & 1100 = 1000
OR:   1010 | 1100 = 1110
XOR:  1010 ^ 1100 = 0110
NOT:  ~1010 = 0101
```

### рж╢рж┐ржлржЯ ржЕржкрж╛рж░рзЗрж╢ржи
```
LSL (Logical Shift Left):
10110100 << 2 = 11010000

LSR (Logical Shift Right):
10110100 >> 2 = 00101101

ASR (Arithmetic Shift Right):
10110100 >> 2 = 11101101  (sign bit copy)

ROL (Rotate Left):
10110100 ROL 2 = 11010010
```

---

## тЪЩя╕П ALU ржбрж┐ржЬрж╛ржЗржи

### Ripple Carry Adder
```
   A3 B3      A2 B2      A1 B1      A0 B0
    тФВ  тФВ       тФВ  тФВ       тФВ  тФВ       тФВ  тФВ
    тЦ╝  тЦ╝       тЦ╝  тЦ╝       тЦ╝  тЦ╝       тЦ╝  тЦ╝
 тФМтФАтФАтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФАтФАтФР
 тФВ  FA   тФВтЧАтФАтФВ  FA   тФВтЧАтФАтФВ  FA   тФВтЧАтФАтФВ  FA   тФВтЧАтФА Cin
 тФФтФАтФАтФАтФмтФАтФАтФАтФШ  тФФтФАтФАтФАтФмтФАтФАтФАтФШ  тФФтФАтФАтФАтФмтФАтФАтФАтФШ  тФФтФАтФАтФАтФмтФАтФАтФАтФШ
     тФВ          тФВ          тФВ          тФВ
    S3         S2         S1         S0
```

### Carry Look-Ahead Adder
- ржжрзНрж░рзБржд: O(log n) delay
- Generate: Gi = Ai AND Bi
- Propagate: Pi = Ai XOR Bi

---

## ЁЯФв Booth's Algorithm (Multiplication)

```
Signed binary multiplication

Bits (Q_i, Q_{i-1}):
00, 11 тЖТ No operation
01     тЖТ Add multiplicand
10     тЖТ Subtract multiplicand
```

---

## тЬПя╕П ржЕржирзБрж╢рзАрж▓ржирзА

1. Flags Register ржПрж░ ржкрзНрж░рждрж┐ржЯрж┐ flag ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рзБржиред
2. Booth's Algorithm ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ 6 ├Ч (-4) ржЧрзБржг ржХрж░рзБржиред
3. 4-bit ALU ржбрж┐ржЬрж╛ржЗржи ржХрж░рзБржиред

---

## ЁЯУЪ ржкрж░ржмрж░рзНрждрзА ржЕржзрзНржпрж╛ржпрж╝
[ржорзЗржорзЛрж░рж┐ рж╣рж╛ржпрж╝рж╛рж░рж╛рж░рзНржХрж┐](../03-ржорзЗржорзЛрж░рж┐-рж╕рж┐рж╕рзНржЯрзЗржо/01-ржорзЗржорзЛрж░рж┐-рж╣рж╛ржпрж╝рж╛рж░рж╛рж░рзНржХрж┐.md)
