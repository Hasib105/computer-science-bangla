# ЁЯЫая╕П ржХржорзНржкрж╛ржЗрж▓рж╛рж░ ржХржирж╕рзНржЯрзНрж░рж╛ржХрж╢ржи ржЯрзБрж▓рж╕ (Compiler Construction Tools)

## ржкрж░рж┐ржЪрж┐рждрж┐

ржХржорзНржкрж╛ржЗрж▓рж╛рж░ рждрзИрж░рж┐ ржХрж░рждрзЗ ржмрж┐ржнрж┐ржирзНржи ржЯрзБрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржЯрзБрж▓ржЧрзБрж▓рзЛ ржХржорзНржкрж╛ржЗрж▓рж╛рж░рзЗрж░ ржмрж┐ржнрж┐ржирзНржи ржЕржВрж╢ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред

## ЁЯУК ржЯрзБрж▓рж╕ржорзВрж╣рзЗрж░ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ              ржХржорзНржкрж╛ржЗрж▓рж╛рж░ ржХржирж╕рзНржЯрзНрж░рж╛ржХрж╢ржи ржЯрзБрж▓рж╕                      тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ                                                             тФВ
тФВ  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР  тФВ
тФВ  тФВ   Scanner   тФВ  тФВ   Parser    тФВ  тФВ   Code Generator    тФВ  тФВ
тФВ  тФВ  Generator  тФВ  тФВ  Generator  тФВ  тФВ     Generator       тФВ  тФВ
тФВ  тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд  тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд  тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд  тФВ
тФВ  тФВ    Lex      тФВ  тФВ    Yacc     тФВ  тФВ     LLVM            тФВ  тФВ
тФВ  тФВ    Flex     тФВ  тФВ    Bison    тФВ  тФВ                     тФВ  тФВ
тФВ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ  тФВ
тФВ                                                             тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## рзз. Lex / Flex (Scanner Generator)

### ржХрзА ржХрж░рзЗ?
Regular Expression ржерзЗржХрзЗ Lexical Analyzer рждрзИрж░рж┐ ржХрж░рзЗ

### ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛:
```
.l ржлрж╛ржЗрж▓ (Rules) тФАтФАтЦ╢ [Lex/Flex] тФАтФАтЦ╢ lex.yy.c тФАтФАтЦ╢ Scanner
```

### Flex ржлрж╛ржЗрж▓рзЗрж░ ржЧржаржи:
```c
%{
/* C Declarations */
#include <stdio.h>
%}

/* Definitions */
DIGIT   [0-9]
LETTER  [a-zA-Z]

%%
/* Rules */
{DIGIT}+        { printf("NUMBER: %s\n", yytext); }
{LETTER}+       { printf("WORD: %s\n", yytext); }
"+"             { printf("PLUS\n"); }
"-"             { printf("MINUS\n"); }
[ \t\n]         { /* ignore whitespace */ }
.               { printf("Unknown: %s\n", yytext); }
%%

/* User Code */
int main() {
    yylex();
    return 0;
}
```

### ржмрзНржпржмрж╣рж╛рж░:
```bash
flex lexer.l           # lex.yy.c рждрзИрж░рж┐
gcc lex.yy.c -lfl -o lexer
./lexer < input.txt
```

## рзи. Yacc / Bison (Parser Generator)

### ржХрзА ржХрж░рзЗ?
Context-Free Grammar ржерзЗржХрзЗ Parser рждрзИрж░рж┐ ржХрж░рзЗ

### ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛:
```
.y ржлрж╛ржЗрж▓ (Grammar) тФАтФАтЦ╢ [Yacc/Bison] тФАтФАтЦ╢ y.tab.c тФАтФАтЦ╢ Parser
```

### Bison ржлрж╛ржЗрж▓рзЗрж░ ржЧржаржи:
```c
%{
#include <stdio.h>
int yylex();
void yyerror(const char *s);
%}

%token NUMBER
%token PLUS MINUS MULTIPLY DIVIDE
%left PLUS MINUS
%left MULTIPLY DIVIDE

%%
/* Grammar Rules */
expr:
      expr PLUS expr     { $$ = $1 + $3; }
    | expr MINUS expr    { $$ = $1 - $3; }
    | expr MULTIPLY expr { $$ = $1 * $3; }
    | expr DIVIDE expr   { $$ = $1 / $3; }
    | NUMBER             { $$ = $1; }
    ;
%%

void yyerror(const char *s) {
    fprintf(stderr, "Error: %s\n", s);
}

int main() {
    yyparse();
    return 0;
}
```

### ржмрзНржпржмрж╣рж╛рж░:
```bash
bison -d parser.y      # y.tab.c ржУ y.tab.h рждрзИрж░рж┐
flex lexer.l           # lex.yy.c рждрзИрж░рж┐
gcc y.tab.c lex.yy.c -o parser
./parser
```

## рзй. ANTLR (ANother Tool for Language Recognition)

### ржмрзИрж╢рж┐рж╖рзНржЯрзНржп:
- ржЖржзрзБржирж┐ржХ ржкрж╛рж░рзНрж╕рж╛рж░ ржЬрзЗржирж╛рж░рзЗржЯрж░
- LL(*) ржкрж╛рж░рзНрж╕рж╛рж░ рждрзИрж░рж┐ ржХрж░рзЗ
- Java, Python, C++ рж╕рж╛ржкрзЛрж░рзНржЯ

### Grammar ржЙржжрж╛рж╣рж░ржг:
```antlr
grammar Expr;

// Parser Rules
prog: stat+ ;

stat: expr NEWLINE          # printExpr
    | ID '=' expr NEWLINE   # assign
    | NEWLINE               # blank
    ;

expr: expr ('*'|'/') expr   # MulDiv
    | expr ('+'|'-') expr   # AddSub
    | INT                   # int
    | ID                    # id
    | '(' expr ')'          # parens
    ;

// Lexer Rules
ID  : [a-zA-Z]+ ;
INT : [0-9]+ ;
NEWLINE : '\r'? '\n' ;
WS  : [ \t]+ -> skip ;
```

## рзк. LLVM (Low Level Virtual Machine)

### ржХрзА ржХрж░рзЗ?
Intermediate Representation (IR) ржерзЗржХрзЗ ржорзЗрж╢рж┐ржи ржХрзЛржб рждрзИрж░рж┐

### ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░:
```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ                        LLVM                             тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ                                                         тФВ
тФВ  Front End тФАтФАтЦ╢ LLVM IR тФАтФАтЦ╢ Optimizer тФАтФАтЦ╢ Back End      тФВ
тФВ  (Clang)                                  (Target)      тФВ
тФВ                                                         тФВ
тФВ  C/C++ тФАтФАтЦ╢ IR тФАтФАтЦ╢ Optimized IR тФАтФАтЦ╢ x86/ARM/etc.        тФВ
тФВ                                                         тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

### LLVM IR ржЙржжрж╛рж╣рж░ржг:
```llvm
define i32 @add(i32 %a, i32 %b) {
entry:
    %result = add i32 %a, %b
    ret i32 %result
}
```

## рзл. ржЕржирзНржпрж╛ржирзНржп ржЯрзБрж▓

### JFlex (Java Flex)
```
.jflex тФАтФАтЦ╢ [JFlex] тФАтФАтЦ╢ Scanner.java
```

### CUP (Constructor of Useful Parsers)
```
.cup тФАтФАтЦ╢ [CUP] тФАтФАтЦ╢ Parser.java
```

### PLY (Python Lex-Yacc)
```python
# Python ржП Lex ржУ Yacc ржмрзНржпржмрж╣рж╛рж░
import ply.lex as lex
import ply.yacc as yacc
```

## ЁЯУЛ ржЯрзБрж▓ рждрзБрж▓ржирж╛

| ржЯрзБрж▓ | ржЗржиржкрзБржЯ | ржЖржЙржЯржкрзБржЯ | ржнрж╛рж╖рж╛ |
|-----|-------|--------|-----|
| Lex/Flex | Regular Expr | C Scanner | C |
| Yacc/Bison | CFG | C Parser | C |
| ANTLR | Grammar | Multiple | Java/C++/Python |
| JFlex | Regular Expr | Java Scanner | Java |
| CUP | CFG | Java Parser | Java |
| PLY | Python | Python Lexer/Parser | Python |

## ЁЯФз рж╕ржорзНржкрзВрж░рзНржг ржЙржжрж╛рж╣рж░ржг: ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░

### lexer.l (Flex)
```c
%{
#include "y.tab.h"
%}

%%
[0-9]+      { yylval = atoi(yytext); return NUMBER; }
"+"         { return PLUS; }
"-"         { return MINUS; }
"*"         { return MUL; }
"/"         { return DIV; }
"("         { return LPAREN; }
")"         { return RPAREN; }
"\n"        { return EOL; }
[ \t]       { /* skip */ }
.           { printf("Unknown char: %s\n", yytext); }
%%
```

### parser.y (Bison)
```c
%{
#include <stdio.h>
extern int yylex();
void yyerror(char *s);
%}

%token NUMBER PLUS MINUS MUL DIV LPAREN RPAREN EOL

%%
input: 
    | input line
    ;

line: EOL
    | expr EOL { printf("Result: %d\n", $1); }
    ;

expr: NUMBER          { $$ = $1; }
    | expr PLUS expr  { $$ = $1 + $3; }
    | expr MINUS expr { $$ = $1 - $3; }
    | expr MUL expr   { $$ = $1 * $3; }
    | expr DIV expr   { $$ = $1 / $3; }
    | LPAREN expr RPAREN { $$ = $2; }
    ;
%%

void yyerror(char *s) {
    fprintf(stderr, "Error: %s\n", s);
}

int main() {
    printf("Calculator:\n");
    yyparse();
    return 0;
}
```

### ржХржорзНржкрж╛ржЗрж▓ ржУ рж░рж╛ржи:
```bash
bison -d parser.y
flex lexer.l
gcc y.tab.c lex.yy.c -o calc -lfl
./calc
```

---
**ржкрж░ржмрж░рзНрждрзА ржЕржзрзНржпрж╛ржпрж╝**: [ржХржорзНржкрж╛ржЗрж▓рж╛рж░рзЗрж░ ржзрж╛ржкрж╕ржорзВрж╣](../рзжрзи-ржХржорзНржкрж╛ржЗрж▓рж╛рж░рзЗрж░-ржзрж╛ржкрж╕ржорзВрж╣/рзжрзз-ржХржорзНржкрж╛ржЗрж▓рж╛рж░рзЗрж░-ржлрзЗржЬ-ржкрж░рж┐ржЪрж┐рждрж┐.md)
