# DNS এবং DHCP (DNS & DHCP)

## 🌐 DNS (Domain Name System)

### DNS কী?

**DNS** হলো ইন্টারনেটের "ফোনবুক" — মানুষের পড়ার উপযোগী নাম কে IP address এ রূপান্তর করে।

```
আপনি টাইপ করেন:    www.google.com
DNS বলে:            142.250.190.78
Browser যায়:        142.250.190.78 এ
```

### কেন দরকার?

```
মনে রাখা সহজ:
✓ www.google.com
✗ 142.250.190.78

✓ www.facebook.com  
✗ 157.240.1.35
```

---

## 📞 DNS Resolution Process

### Step-by-Step

```
আপনি: www.example.com টাইপ করলেন

Step 1: Browser Cache
        "আগে দেখেছি কি?"
        │
        ├── হ্যাঁ → সরাসরি IP ব্যবহার
        │
        └── না → Step 2
        
Step 2: OS Cache / hosts file
        "কম্পিউটারে আছে?"
        │
        └── না → Step 3
        
Step 3: Resolver (ISP DNS / Router)
        "Query পাঠাও"
        │
        └── না → Step 4

Step 4: Root DNS Server
        "কে .com জানে?"
        │
        └── ".com TLD এখানে"
        
Step 5: TLD DNS Server (.com)
        "কে example.com জানে?"
        │
        └── "example.com NS এখানে"
        
Step 6: Authoritative DNS
        "www.example.com এর IP?"
        │
        └── "93.184.216.34"

Step 7: Answer cached এবং browser এ ফেরত
```

### ভিজুয়াল ডায়াগ্রাম

```
[Your PC] ──Query──→ [Resolver/ISP DNS]
                          │
              ┌───────────┼───────────┐
              ↓           ↓           ↓
         [Root DNS]  [TLD DNS]  [Authoritative]
         (. root)    (.com)     (example.com)
              │           │           │
              └───────────┴───────────┘
                          │
                    Answer: 93.184.216.34
```

---

## 🧾 DNS Record Types

### সাধারণ Record Types

| Type | নাম | কাজ | উদাহরণ |
|------|-----|-----|--------|
| **A** | Address | Domain → IPv4 | example.com → 93.184.216.34 |
| **AAAA** | IPv6 Address | Domain → IPv6 | example.com → 2606:2800:... |
| **CNAME** | Canonical Name | Alias | www → example.com |
| **MX** | Mail Exchange | Mail server | mail.example.com |
| **NS** | Name Server | DNS server | ns1.example.com |
| **TXT** | Text | Verification | SPF, DKIM records |
| **PTR** | Pointer | IP → Domain (Reverse) | 34.216.184.93 → example.com |

### উদাহরণ

```
example.com এর DNS Records:

Type    Name            Value
─────────────────────────────────────
A       example.com     93.184.216.34
AAAA    example.com     2606:2800:220:1:...
CNAME   www             example.com
MX      example.com     mail.example.com (priority: 10)
NS      example.com     ns1.example.com
TXT     example.com     "v=spf1 include:..."
```

---

## 🔧 DNS Troubleshooting

### nslookup ব্যবহার

```cmd
nslookup example.com
```

```
Server:  dns.google
Address:  8.8.8.8

Non-authoritative answer:
Name:    example.com
Address:  93.184.216.34
```

### Specific record query

```cmd
nslookup -type=MX example.com
nslookup -type=TXT example.com
```

### DNS Server specify করে query

```cmd
nslookup example.com 8.8.8.8
```

---

## 🔐 Popular Public DNS

| Provider | Primary | Secondary |
|----------|---------|-----------|
| Google | 8.8.8.8 | 8.8.4.4 |
| Cloudflare | 1.1.1.1 | 1.0.0.1 |
| OpenDNS | 208.67.222.222 | 208.67.220.220 |
| Quad9 | 9.9.9.9 | 149.112.112.112 |

---

## 🏷️ DHCP (Dynamic Host Configuration Protocol)

### DHCP কী?

**DHCP** অটোমেটিকভাবে নেটওয়ার্ক ডিভাইসকে IP configuration দেয়।

```
DHCP দেয়:
✓ IP Address
✓ Subnet Mask
✓ Default Gateway
✓ DNS Server
✓ Lease Time
```

### Static vs DHCP

| Static IP | DHCP |
|-----------|------|
| Manual configure | Automatic |
| ভুল হলে conflict | Conflict এড়ায় |
| Server/Printer এ | PC/Phone এ |
| পরিবর্তন হয় না | Lease renew হয় |

---

## 🔄 DHCP Process: DORA

```
┌────────────────────────────────────────────────────────────────┐
│                        DORA Process                             │
├────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [Client]                              [DHCP Server]            │
│      │                                       │                  │
│      │──── D: DISCOVER (Broadcast) ─────────→│                  │
│      │     "কেউ আছো? IP দাও!"                │                  │
│      │                                       │                  │
│      │←─── O: OFFER ────────────────────────│                  │
│      │     "এই নাও 192.168.1.100"            │                  │
│      │                                       │                  │
│      │──── R: REQUEST ──────────────────────→│                  │
│      │     "192.168.1.100 নিতে চাই"          │                  │
│      │                                       │                  │
│      │←─── A: ACKNOWLEDGE ──────────────────│                  │
│      │     "ওকে, তোমার হয়ে গেলো!"            │                  │
│      │                                       │                  │
└────────────────────────────────────────────────────────────────┘
```

### বিস্তারিত

| Step | নাম | Type | বিবরণ |
|------|-----|------|--------|
| D | Discover | Broadcast | Client DHCP server খোঁজে |
| O | Offer | Unicast/Broadcast | Server IP offer করে |
| R | Request | Broadcast | Client accept করে |
| A | Acknowledge | Unicast/Broadcast | Server confirm করে |

---

## ⏰ DHCP Lease

### Lease কী?

IP address "ধার" দেওয়া হয় নির্দিষ্ট সময়ের জন্য।

```
Lease Time: 8 hours

Timeline:
0 hr      4 hr      6 hr      8 hr
│─────────│─────────│─────────│
│         │         │         │
│    50% Renew     87.5%    Lease
│    চেষ্টা করে    Rebind   শেষ
│                   চেষ্টা
```

### Renewal Process

```
50% এ: Unicast DHCP Request → Server
       সফল হলে lease extend

87.5% এ: Broadcast DHCP Request
          যেকোনো server থেকে নতুন lease

100% এ: IP হারায়, নতুন DORA
```

---

## 🏢 DHCP Configuration Example

### DHCP Server Pool

```
┌────────────────────────────────────────┐
│         DHCP Pool: Office_LAN          │
├────────────────────────────────────────┤
│ Network:     192.168.1.0/24            │
│ Range:       192.168.1.100 - .200      │
│ Gateway:     192.168.1.1               │
│ DNS:         8.8.8.8, 8.8.4.4          │
│ Lease:       8 hours                   │
│ Excluded:    192.168.1.1 - .99         │
│              (Static IPs)              │
└────────────────────────────────────────┘
```

### DHCP Reservation (MAC-based)

```
Device: HR_Printer
MAC: 00:1A:2B:3C:4D:5E
Reserved IP: 192.168.1.50

এই MAC সবসময় এই IP পাবে!
```

---

## 🔌 DHCP Relay

### সমস্যা: DHCP server অন্য subnet এ

```
VLAN 10                         VLAN 1
(192.168.10.0/24)              (192.168.1.0/24)

[Client] ───X───→ Broadcast ───X───→ [DHCP Server]
               (Broadcast cross করে না!)
```

### সমাধান: DHCP Relay Agent

```
VLAN 10                         VLAN 1
(192.168.10.0/24)              (192.168.1.0/24)

[Client] ──→ [Router/L3 Switch] ──→ [DHCP Server]
               (Relay Agent)
               Broadcast কে
               Unicast এ convert
```

---

## ⚠️ Common Issues

### DNS সমস্যা

| সমস্যা | কারণ | সমাধান |
|--------|------|--------|
| "Server not found" | DNS resolve fail | DNS server চেক |
| Slow browsing | DNS slow | Public DNS ব্যবহার |
| Wrong site | DNS poisoning | Trusted DNS ব্যবহার |

### DHCP সমস্যা

| সমস্যা | কারণ | সমাধান |
|--------|------|--------|
| 169.254.x.x IP | DHCP fail | DHCP server চেক |
| IP conflict | Duplicate IP | DHCP pool চেক |
| No IP | DHCP exhausted | Pool বড় করুন |

### 169.254.x.x (APIPA) কী?

```
DHCP থেকে IP না পেলে Windows নিজে একটা IP নেয়:
169.254.0.1 - 169.254.255.254

এটা দেখলে বুঝবেন DHCP কাজ করছে না!
```

---

## 🧪 প্র্যাক্টিক্যাল Commands

### DNS Check

```cmd
nslookup google.com
nslookup -type=MX gmail.com
```

### DNS Cache

```cmd
ipconfig /displaydns    # Cache দেখা
ipconfig /flushdns      # Cache মুছে ফেলা
```

### DHCP Info

```cmd
ipconfig /all           # Full info
ipconfig /release       # IP ছেড়ে দেওয়া
ipconfig /renew         # নতুন IP নেওয়া
```

---

## ✏️ অনুশীলনী

### ১. প্রশ্নের উত্তর দিন
```
a) DNS না থাকলে কি IP দিয়ে website খুলতে পারবেন?
b) DORA এর পূর্ণরূপ কী?
c) 169.254.x.x দেখলে কী বুঝবেন?
```

### ২. প্র্যাক্টিক্যাল
```cmd
nslookup facebook.com
ipconfig /all
```
DNS server এবং DHCP server এর IP নোট করুন।

### ৩. Troubleshoot
```
Internet নেই।
ping 8.8.8.8 → Success
ping google.com → Fail

সমস্যা কোথায়?
```

---

## 🎓 পরবর্তী পাঠ

এখন আপনি DNS এবং DHCP বুঝেছেন। পরবর্তী পাঠে আমরা শিখবো:
- [NAT এবং PAT](./??-?????-?????.md)

---

**🔙 [পূর্ববর্তী: VLAN](./??-???????.md)** | **🔜 [পরবর্তী: NAT এবং PAT](./??-?????-?????.md)**


