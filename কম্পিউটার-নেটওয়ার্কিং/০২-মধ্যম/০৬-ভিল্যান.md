# VLAN (Virtual LAN)

## 📖 VLAN কী?

**VLAN (Virtual Local Area Network)** হলো একটি physical switch কে logically ভাগ করে একাধিক আলাদা নেটওয়ার্ক তৈরি করা।

### সহজ উদাহরণ:
```
একটা বড় অফিস ফ্লোরে:
- HR বিভাগ → VLAN 10
- IT বিভাগ → VLAN 20
- Guest → VLAN 30

একই switch, কিন্তু আলাদা নেটওয়ার্ক!
```

---

## 🎯 VLAN কেন দরকার?

### VLAN ছাড়া

```
সব একই Broadcast Domain:
┌─────────────────────────────────────┐
│         All in one LAN              │
│  HR ─── IT ─── Guest ─── Finance    │
│        (সবাই সবার দেখতে পায়)         │
└─────────────────────────────────────┘
```

### VLAN দিয়ে

```
আলাদা Broadcast Domain:
┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│  VLAN 10    │ │  VLAN 20    │ │  VLAN 30    │
│    HR       │ │    IT       │ │   Guest     │
│ (আলাদা)     │ │ (আলাদা)     │ │ (আলাদা)     │
└─────────────┘ └─────────────┘ └─────────────┘
```

### VLAN এর সুবিধা

| সুবিধা | ব্যাখ্যা |
|--------|---------|
| **Security** | Guest network আলাদা, internal access নেই |
| **Broadcast কমায়** | প্রতি VLAN এ broadcast সীমাবদ্ধ |
| **Flexibility** | Physical location না দেখে logical group |
| **Management** | বিভাগ অনুযায়ী policy দেওয়া সহজ |
| **Cost Savings** | কম switch দিয়েই একাধিক network |

---

## 🔌 Port Types: Access vs Trunk

### Access Port

```
একটি VLAN এর সাথে যুক্ত
End device (PC, Printer) এখানে connect করে

[PC] ───────── [Switch Port 1 (Access, VLAN 10)]
```

| বৈশিষ্ট্য | বিবরণ |
|----------|--------|
| VLAN | শুধু ১টি |
| Device | PC, Printer, Server |
| Tagging | Untagged (device জানে না VLAN আছে) |

### Trunk Port

```
একাধিক VLAN বহন করে
Switch-to-Switch বা Switch-to-Router এ ব্যবহার

[Switch A] ═══════════════ [Switch B]
           (Trunk - সব VLAN যায়)
```

| বৈশিষ্ট্য | বিবরণ |
|----------|--------|
| VLAN | একাধিক |
| Device | Switch, Router |
| Tagging | Tagged (VLAN ID যোগ হয়) |

---

## 🏷️ 802.1Q Tagging

### VLAN Tag কী?

Trunk link এ frame এর মধ্যে VLAN ID যোগ করা হয়।

```
Normal Ethernet Frame:
┌────────────┬────────────┬──────────┬─────┐
│ Dest MAC   │ Source MAC │   Data   │ FCS │
└────────────┴────────────┴──────────┴─────┘

802.1Q Tagged Frame:
┌────────────┬────────────┬──────────┬──────────┬─────┐
│ Dest MAC   │ Source MAC │ 802.1Q   │   Data   │ FCS │
│            │            │ VLAN Tag │          │     │
└────────────┴────────────┴──────────┴──────────┴─────┘
                              │
                    ┌─────────┴─────────┐
                    │ VLAN ID: 10       │
                    │ Priority: 0       │
                    └───────────────────┘
```

### Tag এ কী থাকে?

| Field | Size | বিবরণ |
|-------|------|--------|
| TPID | 2 bytes | 0x8100 (802.1Q identifier) |
| Priority | 3 bits | QoS priority (0-7) |
| CFI | 1 bit | Canonical Format |
| VLAN ID | 12 bits | 0-4095 (4094 usable) |

---

## 🌐 Native VLAN

### Native VLAN কী?

Trunk port এ untagged traffic যে VLAN এ যায়।

```
Trunk Port:
├── VLAN 10 traffic → Tagged with 10
├── VLAN 20 traffic → Tagged with 20
└── Untagged traffic → Native VLAN (default: 1)
```

### গুরুত্বপূর্ণ!
```
⚠️ দুই switch এর Native VLAN match করতে হবে!

Switch A (Native VLAN 1) ══════ Switch B (Native VLAN 1) ✓

Switch A (Native VLAN 1) ══════ Switch B (Native VLAN 10) ✗
                                (সমস্যা হবে!)
```

---

## 🧩 VLAN ডায়াগ্রাম

### Single Switch, Multiple VLANs

```
                    ┌─────────────────────┐
                    │       SWITCH        │
                    │                     │
    VLAN 10 ────────┤ Port 1     Port 5 ├──────── VLAN 20
    (HR)            │ Port 2     Port 6 │          (IT)
                    │ Port 3     Port 7 │
    VLAN 30 ────────┤ Port 4     Port 8 ├──────── VLAN 30
    (Guest)         │                     │         (Guest)
                    └─────────────────────┘
    
    VLAN 10: Port 1, 2, 3
    VLAN 20: Port 5, 6, 7
    VLAN 30: Port 4, 8
```

### Multiple Switches with Trunk

```
Building A                              Building B
┌──────────────┐                       ┌──────────────┐
│  Switch A    │                       │  Switch B    │
│              │                       │              │
│ VLAN 10 ─────┼───── Trunk Link ──────┼───── VLAN 10 │
│ (HR)         │    (all VLANs go)     │     (HR)     │
│              │                       │              │
│ VLAN 20 ─────┼───────────────────────┼───── VLAN 20 │
│ (IT)         │                       │     (IT)     │
└──────────────┘                       └──────────────┘

Building A এর HR ─────────── Building B এর HR
(একই VLAN 10, ভিন্ন switch)
```

---

## 🚪 Inter-VLAN Routing

### সমস্যা: VLAN আলাদা হলে communicate কীভাবে?

```
VLAN 10 (192.168.10.0/24) ──╳──→ VLAN 20 (192.168.20.0/24)
                          
Switch broadcast ব্লক করে!
Layer 2 এ VLAN cross করা যায় না।
```

### সমাধান: Layer 3 Device (Router/L3 Switch)

#### Method 1: Router on a Stick

```
                    ┌────────────┐
                    │   ROUTER   │
                    │            │
                    │ eth0.10    │ (Sub-interface VLAN 10)
                    │ eth0.20    │ (Sub-interface VLAN 20)
                    └─────┬──────┘
                          │ Trunk
                          │
                    ┌─────┴──────┐
                    │   SWITCH   │
                    │ VLAN 10    │
                    │ VLAN 20    │
                    └────────────┘

একটি physical interface এ multiple sub-interfaces
```

#### Method 2: Layer 3 Switch (SVI)

```
┌────────────────────────────────┐
│        L3 SWITCH               │
│                                │
│  SVI VLAN 10: 192.168.10.1     │ ← Virtual interface
│  SVI VLAN 20: 192.168.20.1     │ ← Virtual interface
│                                │
│  ┌────────┐    ┌────────┐      │
│  │ VLAN 10│    │ VLAN 20│      │
│  │ ports  │    │ ports  │      │
│  └────────┘    └────────┘      │
└────────────────────────────────┘

Switch নিজেই routing করে!
```

---

## 🏢 বাস্তব VLAN Design

### ছোট অফিসের উদাহরণ

```
┌──────────────────────────────────────────────────────────────┐
│                     VLAN PLAN                                 │
├───────┬────────────────┬──────────────────┬──────────────────┤
│ VLAN  │ Name           │ Subnet           │ Gateway          │
├───────┼────────────────┼──────────────────┼──────────────────┤
│ 10    │ Management     │ 192.168.10.0/24  │ 192.168.10.1     │
│ 20    │ Staff          │ 192.168.20.0/24  │ 192.168.20.1     │
│ 30    │ Voice          │ 192.168.30.0/24  │ 192.168.30.1     │
│ 40    │ Printer        │ 192.168.40.0/24  │ 192.168.40.1     │
│ 99    │ Guest          │ 192.168.99.0/24  │ 192.168.99.1     │
└───────┴────────────────┴──────────────────┴──────────────────┘
```

### নেটওয়ার্ক ডায়াগ্রাম

```
                    [Internet]
                         │
                    [Firewall]
                         │
                    [L3 Switch/Router]
                    ┌────┴────┐
              ┌─────┴─────┐   └─────────┐
              │           │             │
         [Switch A]  [Switch B]    [Switch C]
         1st Floor   2nd Floor     3rd Floor
              │           │             │
         ┌────┴────┐ ┌────┴────┐  ┌────┴────┐
         │  VL10   │ │  VL10   │  │  VL10   │
         │  VL20   │ │  VL20   │  │  VL20   │
         │  VL99   │ │  VL99   │  │  VL99   │
         └─────────┘ └─────────┘  └─────────┘
```

---

## ⚠️ VLAN Best Practices

| Practice | কারণ |
|----------|------|
| VLAN 1 ব্যবহার করবেন না | Default, security risk |
| Native VLAN change করুন | VLAN hopping attack প্রতিরোধ |
| Unused ports disable | Security |
| Document করুন | ভবিষ্যতে troubleshoot সহজ |
| Voice VLAN আলাদা | QoS, prioritization |

---

## 🔧 VLAN Troubleshooting

### সমস্যা ১: VLAN এ device communicate করতে পারছে না
```
চেক করুন:
✓ Port সঠিক VLAN এ আছে?
✓ IP address সঠিক subnet এ?
✓ Gateway সঠিক?
```

### সমস্যা ২: Trunk কাজ করছে না
```
চেক করুন:
✓ দুই দিকে trunk mode?
✓ Allowed VLANs match করে?
✓ Native VLAN same?
```

### সমস্যা ৩: Inter-VLAN routing হচ্ছে না
```
চেক করুন:
✓ L3 device আছে?
✓ SVI/Sub-interface up?
✓ Routing enable?
```

---

## ✏️ অনুশীলনী

### ১. প্রশ্নের উত্তর দিন
```
a) VLAN ব্যবহার করলে broadcast কীভাবে কমে?
b) Access port আর Trunk port এর পার্থক্য কী?
c) VLAN 10 এর PC, VLAN 20 এর PC এর সাথে কীভাবে কথা বলবে?
```

### ২. Design করুন
```
একটি অফিসে:
- 50 জন Staff (VLAN 10)
- 20 জন Guest (VLAN 99)
- 10 টি Printer (VLAN 40)

Subnet plan করুন।
```

### ৩. সিচুয়েশন
```
Switch A এর Native VLAN 1
Switch B এর Native VLAN 10

এদের trunk করলে কী সমস্যা হবে?
```

---

## 🎓 পরবর্তী পাঠ

এখন আপনি VLAN বুঝেছেন। পরবর্তী পাঠে আমরা শিখবো:
- [DNS এবং DHCP](./??-??????-?????????.md)

---

**🔙 [পূর্ববর্তী: সুইচিং কনসেপ্ট](./??-??????.md)** | **🔜 [পরবর্তী: DNS এবং DHCP](./??-??????-?????????.md)**


