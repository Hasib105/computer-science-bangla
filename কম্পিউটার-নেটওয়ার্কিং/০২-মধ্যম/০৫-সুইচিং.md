# সুইচিং কনসেপ্ট (Switching Concepts)

## 📖 Switching কী?

**Switching** হলো একই LAN-এর মধ্যে ডেটা (Frame) সঠিক ডিভাইসে পাঠানোর প্রক্রিয়া। এটি **Layer 2 (Data Link)** এ কাজ করে এবং **MAC Address** ব্যবহার করে।

### সহজ উদাহরণ:
```
Hub এর মতো সবাইকে না পাঠিয়ে, Switch শুধু 
সঠিক ডিভাইসে পাঠায়।

[PC1] ─────────────────┐
                       │
[PC2] ───────── [Switch] ── শুধু PC3 এ পাঠায়
                       │
[PC3] ←────────────────┘ (Destination)
```

---

## 🧾 MAC Address কী?

### MAC Address = Physical Address

```
MAC Address Format:
┌────┬────┬────┬────┬────┬────┐
│ 00 │ 1A │ 2B │ 3C │ 4D │ 5E │
└────┴────┴────┴────┴────┴────┘
  └────┬────┘    └────┬────┘
       │              │
   OUI (Vendor)   Device ID
   (প্রস্তুতকারক)    (ডিভাইস)
```

| বৈশিষ্ট্য | বিবরণ |
|----------|--------|
| দৈর্ঘ্য | 48 bits (6 bytes) |
| ফরম্যাট | Hexadecimal (কোলন বা হাইফেন দ্বারা আলাদা) |
| উদাহরণ | 00:1A:2B:3C:4D:5E বা 00-1A-2B-3C-4D-5E |
| বৈশিষ্ট্য | Hardware এ burned-in (সাধারণত পরিবর্তনযোগ্য না) |

### আপনার MAC দেখুন (Windows)
```cmd
ipconfig /all
```
```
Physical Address. . . . . . . : 00-1A-2B-3C-4D-5E
```

---

## 🗂️ MAC Address Table (CAM Table)

### Switch কীভাবে "শেখে"?

Switch একটি MAC Address Table রাখে যেখানে লেখা থাকে কোন MAC কোন পোর্টে।

```
┌────────────────────────────────────────────┐
│           MAC Address Table                 │
├────────┬─────────────────────┬─────────────┤
│  Port  │     MAC Address     │   VLAN      │
├────────┼─────────────────────┼─────────────┤
│ Port 1 │ 00:1A:2B:3C:4D:5E   │     1       │
│ Port 2 │ 00:1A:2B:3C:4D:5F   │     1       │
│ Port 3 │ 00:1A:2B:3C:4D:60   │     1       │
│ Port 4 │ 00:1A:2B:3C:4D:61   │     1       │
└────────┴─────────────────────┴─────────────┘
```

---

## 📚 Switch এর তিনটি কাজ

### ১. Learn (শেখা)

```
PC1 থেকে frame আসলো:
Source MAC: AA:AA:AA:AA:AA:AA
Incoming Port: Port 1

Switch শেখে: "AA:AA... Port 1 এ আছে"
```

### ২. Forward (পাঠানো)

```
Destination MAC জানা থাকলে:
→ সঠিক port এ পাঠায়

Frame to: BB:BB:BB:BB:BB:BB
Table দেখে: BB:BB... = Port 2
Action: শুধু Port 2 এ পাঠায়
```

### ৩. Flood (সবাইকে পাঠানো)

```
Destination MAC অজানা থাকলে বা Broadcast হলে:
→ Source port ছাড়া সব port এ পাঠায়

Frame to: FF:FF:FF:FF:FF:FF (Broadcast)
Action: সব port এ flood করে
```

---

## 🔄 Frame Forwarding Process

```
Step 1: Frame আসলো Port 1 এ
        Source: AA:AA:AA:AA:AA:AA
        Dest:   BB:BB:BB:BB:BB:BB
              ↓
Step 2: Source MAC শেখে
        Table: AA:AA... = Port 1
              ↓
Step 3: Destination MAC খোঁজে
        BB:BB... কোন port এ?
              ↓
        ┌─────────────────────────┐
        │ জানা        │ অজানা     │
        ├─────────────┼───────────┤
        │ সেই port এ  │ Flood     │
        │ forward     │ (সবাইকে)  │
        └─────────────┴───────────┘
```

---

## 🧨 Collision Domain এবং Broadcast Domain

### Collision Domain

```
Hub এ:
[PC1] ──┐
[PC2] ──┼── [HUB] = একটাই Collision Domain
[PC3] ──┘            (collision হয়)

Switch এ:
[PC1] ──Port 1──┐
[PC2] ──Port 2──┼── [Switch] = প্রতি port আলাদা
[PC3] ──Port 3──┘               (collision নেই)
```

### Broadcast Domain

```
Switch সব Broadcast একই domain এ রাখে:

[PC1] ──┐
[PC2] ──┼── [Switch] = একটাই Broadcast Domain
[PC3] ──┘

VLAN দিলে আলাদা হয়:
[PC1 (VLAN 10)] ──┐
[PC2 (VLAN 10)] ──┼── [Switch] = VLAN 10 Domain
[PC3 (VLAN 20)] ──┘              VLAN 20 Domain (আলাদা)
```

| Domain | Hub | Switch | Router |
|--------|-----|--------|--------|
| Collision | ১টা | প্রতি port আলাদা | প্রতি port আলাদা |
| Broadcast | ১টা | ১টা (VLAN ছাড়া) | প্রতি interface আলাদা |

---

## 🔁 ARP (Address Resolution Protocol)

### ARP কেন দরকার?

```
আপনি 192.168.1.1 এ packet পাঠাতে চান
কিন্তু Switch MAC বোঝে!

তাহলে 192.168.1.1 এর MAC কী?
→ ARP দিয়ে বের করি!
```

### ARP Process

```
Step 1: ARP Request (Broadcast)
┌─────────────────────────────────────────────┐
│ "192.168.1.1 এর MAC কে? আমি 192.168.1.10"   │
│ Destination MAC: FF:FF:FF:FF:FF:FF          │
└─────────────────────────────────────────────┘
         ↓ (সবাই পায়)

Step 2: ARP Reply (Unicast)
┌─────────────────────────────────────────────┐
│ "আমি 192.168.1.1, আমার MAC: 00:1A:2B:3C:4D:5E"│
└─────────────────────────────────────────────┘
         ↓

Step 3: ARP Cache এ সেভ
PC এখন জানে: 192.168.1.1 = 00:1A:2B:3C:4D:5E
```

### ARP Cache দেখুন
```cmd
arp -a
```
```
Interface: 192.168.1.10
  Internet Address      Physical Address
  192.168.1.1           00-1a-2b-3c-4d-5e
  192.168.1.20          00-1a-2b-3c-4d-5f
```

---

## 🌳 STP (Spanning Tree Protocol)

### কেন দরকার?

Switch network এ loop থাকলে বিপদ!

```
Loop Problem:
[Switch A] ═══════════════ [Switch B]
     ║                          ║
     ║                          ║
     ╚══════════════════════════╝
     
Broadcast packet ঘুরতেই থাকে!
→ Broadcast Storm
→ Network crash
```

### STP কী করে?

```
STP একটি link block করে "tree" বানায়:

[Switch A] ═══════════════ [Switch B]
     ║                          ║
     ║                          ╳ (Blocked)
     ╚══════════════════════════╝

Loop নেই! ✓
```

### STP States

| State | কাজ |
|-------|-----|
| Blocking | Traffic পাঠায় না |
| Listening | STP learn করছে |
| Learning | MAC শিখছে |
| Forwarding | Normal operation |

---

## 🔧 Switch এর প্রকারভেদ

### ১. Unmanaged Switch

```
সাধারণ plug-and-play
কনফিগার করা যায় না
বাসা/ছোট অফিসের জন্য
```

### ২. Managed Switch

```
পূর্ণ কনফিগারযোগ্য
VLAN, QoS, Port security
Enterprise/বড় নেটওয়ার্কের জন্য
```

### ৩. Layer 3 Switch

```
Switching + Routing দুটোই করে
VLAN এর মধ্যে route করতে পারে
Data center এ বেশি ব্যবহৃত
```

### ৪. PoE Switch (Power over Ethernet)

```
Ethernet cable দিয়ে power দেয়
IP Phone, Access Point এর জন্য
আলাদা power adapter লাগে না
```

---

## 📊 Hub vs Switch তুলনা

| বৈশিষ্ট্য | Hub | Switch |
|----------|-----|--------|
| Layer | 1 | 2 |
| Intelligence | না | হ্যাঁ |
| Traffic | সবাইকে | নির্দিষ্ট port এ |
| Collision | আছে | নেই |
| Duplex | Half | Full |
| MAC Table | নেই | আছে |
| Speed | Shared | Dedicated per port |
| ব্যবহার | ❌ Obsolete | ✅ Standard |

---

## 🧪 প্র্যাক্টিক্যাল Commands

### ARP Cache দেখা
```cmd
arp -a
```

### ARP Cache মুছে ফেলা
```cmd
arp -d *
```

### MAC Address দেখা
```cmd
getmac /v
```

### Network Connections
```cmd
ipconfig /all
```

---

## ⚠️ Common Switch Issues

### Issue 1: Loop (Broadcast Storm)
```
লক্ষণ: Network খুব slow/crash
কারণ: Switch loop
সমাধান: STP enable, extra cable খুঁজুন
```

### Issue 2: MAC Flooding Attack
```
লক্ষণ: Switch hub এর মতো behave করে
কারণ: Attacker fake MAC পাঠাচ্ছে
সমাধান: Port security enable
```

### Issue 3: Duplicate IP
```
লক্ষণ: Intermittent connectivity
কারণ: একই IP দুই device এ
সমাধান: IP conflict resolve
```

---

## ✏️ অনুশীলনী

### ১. প্রশ্নের উত্তর দিন
```
a) Switch কেন Hub থেকে ভালো?
b) Unknown unicast হলে switch কী করে?
c) STP কেন দরকার?
```

### ২. MAC Address
```
আপনার PC এর MAC address বের করুন।
Command: ipconfig /all
```

### ৩. ARP Table
```
ARP table দেখুন এবং বুঝুন।
Command: arp -a
```

### ৪. সিচুয়েশন
```
PC1 প্রথমবার PC2 এ packet পাঠাচ্ছে।
Switch এর MAC table empty।
Switch কী করবে?
```

---

## 🎓 পরবর্তী পাঠ

এখন আপনি switching এর বেসিক জানেন। পরবর্তী পাঠে আমরা শিখবো:
- [VLAN](./??-???????.md)

---

**🔙 [পূর্ববর্তী: রাউটিং বেসিক](./??-??????-????????.md)** | **🔜 [পরবর্তী: VLAN](./??-???????.md)**


