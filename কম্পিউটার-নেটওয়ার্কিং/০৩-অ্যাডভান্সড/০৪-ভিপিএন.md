# VPN (Virtual Private Network)

## 📖 VPN কী?

**VPN** হলো এমন একটি technology যা public network (Internet) এর উপর দিয়ে **encrypted private tunnel** তৈরি করে, যেন আপনি physically সেই private network এ connected।

```
Without VPN:
┌──────┐                              ┌──────┐
│ You  │ ═══════════════════════════→ │Server│
└──────┘    🔓 Plain Text             └──────┘
            Anyone can see!


With VPN:
┌──────┐     ┌─────────────────────┐     ┌──────┐
│ You  │ ══→ │🔒 Encrypted Tunnel 🔒│ ══→ │Server│
└──────┘     └─────────────────────┘     └──────┘
             ISP can't see content!
```

---

## 🤔 VPN কেন দরকার?

```
┌─────────────────────────────────────────────────────┐
│                 VPN Use Cases                        │
├─────────────────────────────────────────────────────┤
│                                                      │
│  🏢 Remote Work         🔒 Privacy                  │
│  Office এ না থেকেও      ISP/hackers দেখতে           │
│  office network access   পারে না কী করছেন          │
│                                                      │
│  🌍 Geo-restriction     ☕ Public WiFi              │
│  অন্য দেশের content     Coffee shop এ              │
│  access করা             secure browsing             │
│                                                      │
│  🏭 Site-to-Site        🛡️ Security                │
│  দুই office connect      Data encryption            │
│                                                      │
└─────────────────────────────────────────────────────┘
```

---

## 📊 VPN এর প্রকারভেদ

### ১. Remote Access VPN

```
Individual users বাসা থেকে office connect করে।

┌──────────────────────────────────────────────────────┐
│                                                       │
│   Home User                         Company Network   │
│                                                       │
│  ┌────────┐      🌐 Internet       ┌────────────┐   │
│  │ Laptop │ ══════════════════════►│ VPN Server │   │
│  │  +VPN  │    Encrypted Tunnel    │            │   │
│  │ Client │                        │   ┌────┐   │   │
│  └────────┘                        │   │ DC │   │   │
│                                    │   └────┘   │   │
│  ┌────────┐                        │   ┌────┐   │   │
│  │ Mobile │ ══════════════════════►│   │Files│  │   │
│  │  +VPN  │    Encrypted Tunnel    │   └────┘   │   │
│  └────────┘                        └────────────┘   │
│                                                       │
└──────────────────────────────────────────────────────┘
```

### ২. Site-to-Site VPN

```
দুটি office এর মধ্যে permanent VPN connection।

┌─────────────────┐            ┌─────────────────┐
│   Dhaka Office  │            │  Chittagong     │
│                 │            │   Office        │
│  ┌────┐ ┌────┐  │            │  ┌────┐ ┌────┐  │
│  │PC1 │ │PC2 │  │            │  │PC3 │ │PC4 │  │
│  └──┬─┘ └─┬──┘  │            │  └──┬─┘ └─┬──┘  │
│     └──┬──┘     │            │     └──┬──┘     │
│    ┌───┴───┐    │  Internet  │    ┌───┴───┐    │
│    │ Router│════╪════════════╪════│ Router│    │
│    │ + VPN │    │   Tunnel   │    │ + VPN │    │
│    └───────┘    │            │    └───────┘    │
└─────────────────┘            └─────────────────┘

Permanent encrypted connection between sites
```

### ৩. Client-to-Site vs Site-to-Site

| Feature | Remote Access | Site-to-Site |
|---------|---------------|--------------|
| Who connects | Individual user | Entire network |
| Duration | Temporary | Permanent (usually) |
| Software | VPN client needed | Router handles |
| Example | Work from home | Branch office |

---

## 🔐 VPN Protocols

### Protocol তুলনা

```
┌──────────────────────────────────────────────────────┐
│               VPN Protocols Comparison                │
├──────────┬───────────┬───────────┬───────────────────┤
│ Protocol │  Security │   Speed   │      Notes        │
├──────────┼───────────┼───────────┼───────────────────┤
│ PPTP     │   Weak ❌ │   Fast    │ Outdated, avoid   │
│ L2TP     │  Medium   │   Medium  │ With IPsec ok     │
│ IPsec    │ Strong ✓  │   Good    │ Enterprise std    │
│ OpenVPN  │ Strong ✓  │   Good    │ Open source       │
│ IKEv2    │ Strong ✓  │   Fast    │ Mobile friendly   │
│ WireGuard│ Strong ✓  │ Very Fast │ Modern, simple    │
└──────────┴───────────┴───────────┴───────────────────┘
```

---

## 🛡️ IPsec VPN

**IPsec (IP Security)** - Enterprise grade VPN standard।

### IPsec Modes

```
Transport Mode:
Original header kept, only payload encrypted.
┌────────────┬─────────────────────────┐
│ IP Header  │ 🔒 Encrypted Payload 🔒 │
└────────────┴─────────────────────────┘
Use: End-to-end between two hosts


Tunnel Mode:
Entire original packet encrypted, new header added.
┌────────────┬────────────────────────────────────┐
│ New Header │ 🔒 Original IP Header + Payload 🔒 │
└────────────┴────────────────────────────────────┘
Use: Site-to-Site VPN
```

### IPsec Components

```
┌─────────────────────────────────────────────────────┐
│                    IPsec                             │
├─────────────────────────────────────────────────────┤
│                                                      │
│  ┌──────────────┐  ┌──────────────┐                 │
│  │     AH       │  │     ESP      │                 │
│  │ (Auth Header)│  │(Encapsulating│                 │
│  │              │  │ Sec Payload) │                 │
│  │ • Integrity  │  │ • Encryption │                 │
│  │ • Auth only  │  │ • Integrity  │                 │
│  │ • No encrypt │  │ • Auth       │                 │
│  └──────────────┘  └──────────────┘                 │
│                                                      │
│  ┌─────────────────────────────────────────────┐    │
│  │                   IKE                        │    │
│  │   (Internet Key Exchange)                    │    │
│  │   Key negotiation & tunnel setup             │    │
│  └─────────────────────────────────────────────┘    │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### IKE Phases

```
Phase 1: Secure channel establish
┌────────┐                         ┌────────┐
│ VPN GW │ ←── Negotiate params ──→│ VPN GW │
│   A    │ ←── Exchange keys ────→ │   B    │
│        │ ←── Authenticate ─────→ │        │
└────────┘    ISAKMP SA created    └────────┘

Phase 2: IPsec tunnel establish
┌────────┐                         ┌────────┐
│ VPN GW │ ←── Negotiate IPsec ──→ │ VPN GW │
│   A    │    parameters           │   B    │
│        │    IPsec SA created     │        │
└────────┘    Traffic can flow!    └────────┘
```

---

## 🌐 SSL/TLS VPN

**Web browser based VPN** - সহজ deployment।

```
SSL VPN Types:

1. Clientless (Portal-based):
┌─────────┐    HTTPS     ┌──────────┐
│ Browser │ ──────────→  │ VPN      │ ──→ Internal
│         │              │ Portal   │     Resources
└─────────┘              └──────────┘
Just need browser!


2. Full Tunnel (Client-based):
┌─────────┐              ┌──────────┐
│ SSL VPN │ ═══════════→ │ VPN      │ ══→ Full Network
│ Client  │   Tunnel     │ Server   │     Access
└─────────┘              └──────────┘
```

### IPsec vs SSL VPN

| Feature | IPsec VPN | SSL VPN |
|---------|-----------|---------|
| Layer | Network (3) | Application (7) |
| Client | Required | Optional (portal) |
| Firewall | May block | Usually works |
| Use case | Site-to-site | Remote access |
| Setup | Complex | Easier |

---

## 🚀 WireGuard

**Modern VPN** - Fast, simple, secure।

```
┌─────────────────────────────────────────────────────┐
│                 WireGuard Features                   │
├─────────────────────────────────────────────────────┤
│ ✓ Only ~4000 lines of code (vs OpenVPN 100,000+)    │
│ ✓ Modern cryptography (ChaCha20, Curve25519)        │
│ ✓ Very fast (kernel-level implementation)           │
│ ✓ Simple configuration                              │
│ ✓ Mobile battery friendly                           │
│ ✓ Seamless roaming                                  │
└─────────────────────────────────────────────────────┘
```

---

## 🔧 VPN কীভাবে কাজ করে

### Tunneling Process

```
Step 1: Original Data
┌──────────────────────────────────┐
│ Your data: "Hello, Server!"     │
└──────────────────────────────────┘

Step 2: VPN Encryption
┌──────────────────────────────────┐
│ 🔒 xK9#mZ!@pL2$vN8&qR4...       │
└──────────────────────────────────┘

Step 3: New Header Added (Encapsulation)
┌────────────┬─────────────────────────────────┐
│ VPN Header │ 🔒 Encrypted Original Packet 🔒 │
│ (Tunnel)   │                                 │
└────────────┴─────────────────────────────────┘

Step 4: Travel through Internet
ISP sees: VPN traffic to VPN server IP
ISP can't see: Actual content or destination

Step 5: VPN Server Decrypts
┌──────────────────────────────────┐
│ Your data: "Hello, Server!"     │
└──────────────────────────────────┘
```

---

## 💻 VPN Configuration Example

### Windows Built-in VPN

```
Settings → Network → VPN → Add VPN

VPN Provider:        Windows (built-in)
Connection name:     Office VPN
Server:             vpn.company.com
VPN type:           IKEv2
Sign-in info:       Username and password
Username:           your.name
Password:           ********
```

### OpenVPN Config (Example)

```
client
dev tun
proto udp
remote vpn.server.com 1194
resolv-retry infinite
nobind
persist-key
persist-tun
ca ca.crt
cert client.crt
key client.key
cipher AES-256-CBC
auth SHA256
verb 3
```

### WireGuard Config (Example)

```ini
[Interface]
PrivateKey = your_private_key_here
Address = 10.0.0.2/24
DNS = 8.8.8.8

[Peer]
PublicKey = server_public_key_here
AllowedIPs = 0.0.0.0/0
Endpoint = vpn.server.com:51820
PersistentKeepalive = 25
```

---

## ⚠️ VPN সুবিধা ও সীমাবদ্ধতা

### সুবিধা

```
✓ Privacy protection (ISP can't see)
✓ Encryption (hackers can't read)
✓ Remote access to private resources
✓ Bypass geo-restrictions
✓ Public WiFi security
```

### সীমাবদ্ধতা

```
✗ Speed reduction (encryption overhead)
✗ VPN provider can see traffic
✗ Not anonymous (just shifted trust)
✗ Some services block VPN
✗ Added complexity
```

### VPN ≠ Complete Anonymity!

```
VPN তে VPN provider দেখতে পারে:
┌──────┐              ┌──────────┐
│ You  │ ═══════════→ │VPN Server│ ═══→ Internet
└──────┘              └──────────┘
                           ↑
                    VPN provider
                    logs রাখতে পারে!

জন্য Logging policy check করুন!
```

---

## 🏢 Enterprise VPN Architecture

```
                     ┌─────────────────────────────────┐
                     │         Cloud/Internet          │
                     └─────────────────────────────────┘
                                    │
                     ┌──────────────┼──────────────┐
                     ↓              ↓              ↓
              ┌──────────┐  ┌──────────┐  ┌──────────┐
              │ Remote   │  │ Remote   │  │ Branch   │
              │ Worker   │  │ Worker   │  │ Office   │
              │ (VPN)    │  │ (VPN)    │  │ (S2S)    │
              └────┬─────┘  └────┬─────┘  └────┬─────┘
                   │             │             │
                   └─────────────┼─────────────┘
                                 ↓
                     ┌─────────────────────────┐
                     │      VPN Gateway        │
                     │   (Concentrator)        │
                     └───────────┬─────────────┘
                                 ↓
                     ┌─────────────────────────┐
                     │    Corporate Network    │
                     │  ┌────┐ ┌────┐ ┌────┐   │
                     │  │ DC │ │File│ │Mail│   │
                     │  └────┘ └────┘ └────┘   │
                     └─────────────────────────┘
```

---

## ✏️ অনুশীলনী

### ১. সঠিক VPN বাছুন
```
Scenario এ কোন VPN type ভালো হবে?

a) Employee বাসায় কাজ করছে
b) দুটি office connect করতে হবে
c) Browser দিয়ে specific app access
d) Mobile তে fast VPN দরকার
```

### ২. Match করুন
```
IPsec    →  ?
SSL VPN  →  ?
WireGuard →  ?
PPTP     →  ?

Options: Modern/Fast, Browser-based, Enterprise, Obsolete
```

### ৩. Hands-on
```
a) Windows built-in VPN configure করে দেখুন
b) বা free VPN service (ProtonVPN) try করুন
c) VPN on/off করে IP address compare করুন
   (whatismyip.com দিয়ে)
```

---

## 🎓 মনে রাখুন

```
VPN = Encrypted tunnel through internet

VPN ব্যবহারে:
✓ Privacy বাড়ে
✓ Security বাড়ে
✗ কিন্তু 100% anonymous না!

Choose: reputable provider + no-logs policy
```

---

**🔙 [পূর্ববর্তী: Firewall](./??-?????????.md)** | **🔜 [পরবর্তী: Wireless Security](./??-?????????.md)**


