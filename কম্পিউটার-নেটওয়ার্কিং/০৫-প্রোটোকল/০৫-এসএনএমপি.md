# SNMP (Simple Network Management Protocol)

## 📖 SNMP কী?

**SNMP (Simple Network Management Protocol)** হলো network devices **monitor ও manage** করার standard protocol।

```
┌─────────────────────────────────────────────────────────┐
│                  SNMP Overview                           │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  Purpose: Network monitoring & management               │
│  Port: 161 (agent), 162 (trap receiver)                │
│  Layer: Application Layer (UDP-based)                   │
│                                                          │
│  Use cases:                                             │
│  ├── Monitor device health (CPU, memory, uptime)       │
│  ├── Check interface status & traffic                  │
│  ├── Receive alerts (traps) from devices               │
│  ├── Configure devices remotely                        │
│  └── Inventory & asset management                      │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

## 🏗️ SNMP Architecture

### Components

```
SNMP Architecture:

┌──────────────────────────────────────────────────────────┐
│                   SNMP Manager (NMS)                     │
│              (Network Management System)                 │
│                                                          │
│  Examples: Nagios, Zabbix, PRTG, SolarWinds             │
└─────────────────────────┬────────────────────────────────┘
                          │
        ┌─────────────────┼─────────────────┐
        │                 │                 │
        ▼                 ▼                 ▼
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ SNMP Agent   │  │ SNMP Agent   │  │ SNMP Agent   │
│   (Router)   │  │  (Switch)    │  │  (Server)    │
│              │  │              │  │              │
│   MIB Data   │  │   MIB Data   │  │   MIB Data   │
└──────────────┘  └──────────────┘  └──────────────┘

Manager: Collects & processes data
Agent: Runs on device, provides data
MIB: Database of manageable objects
```

### Communication Flow

```
SNMP Communication:

┌──────────────┐                    ┌──────────────┐
│    Manager   │     GET Request   │    Agent     │
│    (NMS)     │ ─────────────────→│  (Device)    │
│              │                    │              │
│              │     Response       │              │
│              │ ←─────────────────│              │
│              │                    │              │
│              │     TRAP (Alert)  │              │
│              │ ←─────────────────│              │
└──────────────┘                    └──────────────┘
    Port 162 ←───── Traps            Port 161

GET: Manager asks for data
SET: Manager changes configuration
TRAP: Agent sends alert to manager
```

---

## 📊 SNMP Operations

### Basic Operations

```
┌─────────────────────────────────────────────────────────┐
│              SNMP Operations                             │
├──────────────┬──────────────────────────────────────────┤
│ Operation    │ Description                              │
├──────────────┼──────────────────────────────────────────┤
│ GET          │ Retrieve a specific OID value           │
│ GET-NEXT     │ Get next OID in sequence (walk)         │
│ GET-BULK     │ Get multiple OIDs efficiently (v2c+)    │
│ SET          │ Modify a value on the agent             │
│ TRAP         │ Async alert from agent to manager       │
│ INFORM       │ Acknowledged trap (v2c+)                │
│ RESPONSE     │ Agent's reply to GET/SET                │
└──────────────┴──────────────────────────────────────────┘
```

### Operation Diagram

```
GET Operation:

Manager                              Agent
   │                                   │
   │ ─── GET sysName.0 ──────────────→│
   │                                   │
   │ ←── Response "MyRouter" ─────────│
   │                                   │


TRAP Operation:

Manager                              Agent
   │                                   │
   │ ←── TRAP: Link Down! ────────────│
   │     (Interface eth0 is down)     │
   │                                   │
   │      (No acknowledgment          │
   │       with basic TRAP)           │


SET Operation:

Manager                              Agent
   │                                   │
   │ ─── SET sysName.0 = "NewName" ──→│
   │                                   │
   │ ←── Response OK ─────────────────│
   │                                   │
```

---

## 📋 MIB (Management Information Base)

### MIB Structure

**MIB** হলো একটি **hierarchical database** যা define করে কোন information available।

```
MIB Tree Structure:

                    root
                      │
        ┌─────────────┼─────────────┐
        │             │             │
      iso(1)       joint(2)     ccitt(0)
        │
      org(3)
        │
      dod(6)
        │
    internet(1)
        │
   ┌────┼────┬────────┬───────┐
   │    │    │        │       │
mgmt experimental private    ...
(2)     (3)       (4)
   │              │
 mib-2(1)    enterprises(1)
   │              │
┌──┼──┐     ┌────┼────┐
│  │  │     │    │    │
sys if ...  cisco hp  ...
(1) (2)     (9)  (11)

Full OID example:
.1.3.6.1.2.1.1.5.0 = sysName
```

### Common OIDs

```
┌─────────────────────────────────────────────────────────┐
│              Common SNMP OIDs                            │
├──────────────────────────────────┬──────────────────────┤
│ OID                              │ Description          │
├──────────────────────────────────┼──────────────────────┤
│ .1.3.6.1.2.1.1.1.0 (sysDescr)    │ System description  │
│ .1.3.6.1.2.1.1.3.0 (sysUpTime)   │ Uptime in ticks     │
│ .1.3.6.1.2.1.1.4.0 (sysContact)  │ Contact person      │
│ .1.3.6.1.2.1.1.5.0 (sysName)     │ Device hostname     │
│ .1.3.6.1.2.1.1.6.0 (sysLocation) │ Physical location   │
├──────────────────────────────────┼──────────────────────┤
│ .1.3.6.1.2.1.2.1.0 (ifNumber)    │ Number of interfaces│
│ .1.3.6.1.2.1.2.2.1.2 (ifDescr)   │ Interface names     │
│ .1.3.6.1.2.1.2.2.1.8 (ifOperStat)│ Interface status    │
├──────────────────────────────────┼──────────────────────┤
│ .1.3.6.1.2.1.25.3.3.1.2          │ CPU usage (HOST-MIB)│
│ .1.3.6.1.2.1.25.2.3.1.6          │ Memory usage        │
└──────────────────────────────────┴──────────────────────┘

OID Format: .iso.org.dod.internet.mgmt.mib-2.system.sysName.0
Numeric:    .1.3.6.1.2.1.1.5.0
```

---

## 🔢 SNMP Versions

### Version Comparison

```
┌────────────────────────────────────────────────────────────┐
│              SNMP Versions                                  │
├──────────┬─────────────┬─────────────┬─────────────────────┤
│ Feature  │   SNMPv1    │   SNMPv2c   │      SNMPv3         │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ Security │ Community   │ Community   │ User-based (USM)    │
│          │ string      │ string      │                     │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ Auth     │ None        │ None        │ MD5, SHA, SHA-256   │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ Encrypt  │ None ✗      │ None ✗      │ DES, AES ✓          │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ GET-BULK │ No          │ Yes         │ Yes                 │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ INFORM   │ No          │ Yes         │ Yes                 │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ 64-bit   │ No          │ Yes         │ Yes                 │
│ counters │             │             │                     │
├──────────┼─────────────┼─────────────┼─────────────────────┤
│ Status   │ Legacy ⚠️   │ Common      │ Recommended ✓       │
└──────────┴─────────────┴─────────────┴─────────────────────┘
```

### SNMPv1/v2c Community Strings

```
SNMPv1 & v2c Security (Weak!):

┌──────────────┐     Community: "public"    ┌──────────────┐
│              │ ─────────────────────────→ │              │
│   Manager    │      (like password)       │    Agent     │
│              │ ←───────────────────────── │              │
└──────────────┘        Response            └──────────────┘

Default Community Strings:
├── public   (read-only)    ⚠️ Change this!
└── private  (read-write)   ⚠️ Change this!

Problems:
✗ Sent in clear text
✗ No encryption
✗ Easy to intercept
✗ Default strings often unchanged
```

### SNMPv3 Security

```
SNMPv3 Security Levels:

┌────────────────┬───────────────┬───────────────────────┐
│ Security Level │ Auth          │ Privacy (Encryption) │
├────────────────┼───────────────┼───────────────────────┤
│ noAuthNoPriv   │ Username only │ None                  │
├────────────────┼───────────────┼───────────────────────┤
│ authNoPriv     │ MD5/SHA       │ None                  │
├────────────────┼───────────────┼───────────────────────┤
│ authPriv ✓     │ MD5/SHA       │ DES/AES              │
└────────────────┴───────────────┴───────────────────────┘

Recommended: authPriv (authentication + encryption)

SNMPv3 Configuration:
├── Username: snmpadmin
├── Auth Protocol: SHA
├── Auth Password: AuthPass123!
├── Privacy Protocol: AES-128
└── Privacy Password: PrivPass456!
```

---

## 💻 SNMP Commands

### Linux (net-snmp)

```bash
# Install SNMP tools
sudo apt install snmp snmp-mibs-downloader

# Basic GET (v2c)
snmpget -v2c -c public 192.168.1.1 sysName.0
# Output: SNMPv2-MIB::sysName.0 = STRING: "MyRouter"

# GET with numeric OID
snmpget -v2c -c public 192.168.1.1 .1.3.6.1.2.1.1.5.0

# WALK (get all under OID)
snmpwalk -v2c -c public 192.168.1.1 system
snmpwalk -v2c -c public 192.168.1.1 interfaces

# GET-BULK (faster walk)
snmpbulkwalk -v2c -c public 192.168.1.1 ifTable

# SNMPv3 query
snmpget -v3 -l authPriv \
  -u snmpadmin \
  -a SHA -A "AuthPass123!" \
  -x AES -X "PrivPass456!" \
  192.168.1.1 sysUpTime.0

# SET command (change value)
snmpset -v2c -c private 192.168.1.1 \
  sysContact.0 s "admin@company.com"

# Table query
snmptable -v2c -c public 192.168.1.1 ifTable
```

### Windows (PowerShell)

```powershell
# Using SNMP module
Install-Module -Name SNMPv3

# Basic query
Get-SNMPData -IP 192.168.1.1 -OID ".1.3.6.1.2.1.1.5.0" `
  -Community "public"

# Or use third-party tools:
# - SnmpB (GUI)
# - iReasoning MIB Browser
```

---

## 🖥️ SNMP Configuration Examples

### Cisco Router

```
! Enable SNMP (v2c)
snmp-server community public RO
snmp-server community private RW

! Set system information
snmp-server contact admin@company.com
snmp-server location "Data Center, Rack 5"

! Configure traps
snmp-server enable traps
snmp-server host 10.0.0.100 version 2c public

! SNMPv3 configuration
snmp-server group SNMPV3GROUP v3 priv
snmp-server user snmpadmin SNMPV3GROUP v3 auth sha AuthPass priv aes 128 PrivPass
```

### Linux Agent (snmpd)

```bash
# Edit /etc/snmp/snmpd.conf

# SNMPv2c (basic)
rocommunity public  192.168.1.0/24
rwcommunity private 192.168.1.100

# System information
syslocation "Server Room"
syscontact admin@company.com

# SNMPv3 user
createUser snmpadmin SHA "AuthPass123" AES "PrivPass456"
rouser snmpadmin priv

# Restart service
sudo systemctl restart snmpd
```

---

## 📊 Monitoring with SNMP

### Common Monitoring Metrics

```
┌─────────────────────────────────────────────────────────┐
│           What to Monitor with SNMP                      │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  System Health:                                         │
│  ├── CPU usage                                          │
│  ├── Memory usage                                       │
│  ├── Disk space                                         │
│  └── System uptime                                      │
│                                                          │
│  Network Interfaces:                                    │
│  ├── Interface status (up/down)                         │
│  ├── Traffic (bytes in/out)                            │
│  ├── Errors & discards                                  │
│  └── Bandwidth utilization                             │
│                                                          │
│  Hardware:                                              │
│  ├── Temperature                                        │
│  ├── Fan speed                                          │
│  ├── Power supply status                               │
│  └── Hardware errors                                    │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### Interface Monitoring Example

```
Monitor Interface Traffic:

OIDs for interface 1:
├── ifDescr.1      = "GigabitEthernet0/0"
├── ifOperStatus.1 = up(1) / down(2)
├── ifInOctets.1   = 123456789 (bytes received)
├── ifOutOctets.1  = 987654321 (bytes sent)
├── ifInErrors.1   = 0
└── ifOutErrors.1  = 0

Calculate bandwidth:
1. Poll ifInOctets every 5 minutes
2. Delta = current - previous
3. Bits/sec = (Delta * 8) / 300
4. Compare to interface speed
```

### Traffic Graph

```
Interface Traffic Over Time:

Mbps
100 │                    ┌──┐
 90 │              ┌─────┤  │
 80 │        ┌─────┤     │  │
 70 │   ┌────┤     │     │  │
 60 │   │    │     │     │  └────
 50 │   │    │     │     │
 40 ├───┤    │     │     │
 30 │   │    │     │     │
 20 │   │    │     └─────┘
 10 │   │    │
  0 └───┴────┴──────────────────→ Time
    00:00    06:00    12:00    18:00

Generated by SNMP polling every 5 minutes
Tools: Cacti, MRTG, PRTG, Zabbix
```

---

## 🚨 SNMP Traps

### Trap Concept

```
SNMP Traps = Proactive Alerts

Instead of Manager polling every device...
Device SENDS alert when something happens!

Normal Polling:          Trap-based:
                         
Manager                  Manager
   │ GET? GET? GET?        │
   │ ──→ ──→ ──→           │ (waiting)
   ▼                       ▼
Agent                    Agent
   │                       │
   │ (problem happens!)    │ (problem happens!)
   │                       │
   │ (waits for poll...)   │ ──→ TRAP! Link down!
   │                       │
   
Polling: Delay until next check
Trap: Immediate notification
```

### Common Traps

```
┌─────────────────────────────────────────────────────────┐
│              Standard SNMP Traps                         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  coldStart      - Device rebooted                       │
│  warmStart      - Software restart                      │
│  linkDown       - Interface went down                   │
│  linkUp         - Interface came up                     │
│  authFailure    - Wrong community/auth                  │
│                                                          │
│  Vendor-specific traps:                                 │
│  ├── High CPU usage                                     │
│  ├── High temperature                                   │
│  ├── Fan failure                                        │
│  ├── Power supply issue                                │
│  └── BGP neighbor down                                  │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

## 🛠️ SNMP Tools

### Monitoring Systems

```
┌─────────────────────────────────────────────────────────┐
│              Popular SNMP Tools                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  Open Source:                                           │
│  ├── Nagios / Nagios XI                                 │
│  ├── Zabbix                                             │
│  ├── Cacti (graphing)                                   │
│  ├── LibreNMS                                           │
│  └── Prometheus + SNMP Exporter                         │
│                                                          │
│  Commercial:                                            │
│  ├── PRTG Network Monitor                               │
│  ├── SolarWinds NPM                                     │
│  ├── ManageEngine OpManager                             │
│  └── Datadog                                            │
│                                                          │
│  MIB Browsers:                                          │
│  ├── iReasoning MIB Browser                             │
│  ├── SnmpB                                              │
│  └── Paessler MIB Importer                             │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

## 🔒 SNMP Security Best Practices

```
┌─────────────────────────────────────────────────────────┐
│           SNMP Security Recommendations                  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  1. Use SNMPv3 with authPriv                           │
│     (authentication + encryption)                       │
│                                                          │
│  2. If using v2c (legacy):                              │
│     ├── Change default community strings!               │
│     ├── Use complex strings                             │
│     └── Restrict by IP (ACL)                           │
│                                                          │
│  3. Limit SNMP access:                                  │
│     ├── Only from management network                    │
│     ├── Use firewall rules                              │
│     └── Disable unused features                         │
│                                                          │
│  4. Disable SNMP write access                           │
│     (use read-only where possible)                      │
│                                                          │
│  5. Monitor for SNMP attacks                            │
│     ├── Community string brute-force                    │
│     ├── Large SNMP responses (amplification)            │
│     └── Unauthorized queries                            │
│                                                          │
│  6. Keep MIBs and firmware updated                      │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

## ✏️ অনুশীলনী

### ১. SNMP Basics
```
a) SNMP এর পূর্ণরূপ কী?
b) SNMP কোন ports ব্যবহার করে?
c) Agent এবং Manager এর পার্থক্য কী?
d) MIB কী এবং কেন প্রয়োজন?
```

### ২. Version Selection
```
নিচের scenarios এ কোন SNMP version ব্যবহার করবেন?

a) Secure enterprise environment
b) Legacy devices that only support old protocols
c) Simple home lab monitoring
```

### ৩. OID Practice
```
নিচের OIDs কী represent করে?

a) .1.3.6.1.2.1.1.5.0
b) .1.3.6.1.2.1.1.3.0
c) .1.3.6.1.2.1.2.2.1.8
```

### ৪. Hands-on
```
(If you have network devices):

a) Enable SNMP on a device
b) Use snmpwalk to query system information
c) Query interface table
d) Set up a monitoring tool (Zabbix/PRTG)
```

---

## 🎓 মনে রাখুন

```
SNMP Essentials:
├── Manager queries Agents
├── Port 161 (queries), 162 (traps)
└── UDP-based protocol

Operations:
├── GET      - Read value
├── SET      - Write value
├── TRAP     - Alert from device
└── WALK     - Read all values

Versions:
├── v1/v2c - Community string (weak)
└── v3     - User + Auth + Encryption ✓

MIB:
├── Hierarchical OID tree
├── Defines available data
└── .1.3.6.1.2.1.1.5.0 = sysName

Security Tips:
├── Use SNMPv3 when possible
├── Change default community strings
├── Restrict access by IP
└── Monitor for abuse
```

---

**🔙 [পূর্ববর্তী: Email Protocols](./??-?????-????????.md)** | **🏠 [মূল পাতা](../README.md)**


