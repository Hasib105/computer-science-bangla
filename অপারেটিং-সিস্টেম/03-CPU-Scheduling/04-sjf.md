# Shortest Job First (SJF) рж╢рж┐ржбрж┐ржЙрж▓рж┐ржВ

## ЁЯУМ рж╕ржВржЬрзНржЮрж╛

**SJF** ржЕрзНржпрж╛рж▓ржЧрж░рж┐ржжржорзЗ рж╕ржмржЪрзЗржпрж╝рзЗ ржХржо burst time ржПрж░ ржкрзНрж░рж╕рзЗрж╕ ржЖржЧрзЗ CPU ржкрж╛ржпрж╝ред

```
Ready Queue:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  P1(7)  P2(3)  P3(5)  P4(1)  P5(4)             тФВ
тФВ                                                тФВ
тФВ  Sorted by Burst Time:                         тФВ
тФВ  P4(1) тЖТ P2(3) тЖТ P5(4) тЖТ P3(5) тЖТ P7(7)       тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

---

## ЁЯФД ржжрзБржЗ ржзрж░ржирзЗрж░ SJF

### рзз. Non-Preemptive SJF (SJN)
```
ржПржХржмрж╛рж░ CPU ржкрзЗрж▓рзЗ рж╢рзЗрж╖ ржкрж░рзНржпржирзНржд ржЪрж▓ржмрзЗ

P1 ржЪрж▓ржЫрзЗ    P2 ржЖрж╕рзЗ (ржЫрзЛржЯ)    P1 рж╢рзЗрж╖ рж╣рж▓рзЗ P2 ржкрж╛ржпрж╝
тЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВ
        P1 рж╢рзЗрж╖ ржирж╛ рж╣ржУржпрж╝рж╛       тФВ  P2   тФВ
         ржкрж░рзНржпржирзНржд ржЪрж▓рзЗ         тФВ       тФВ
```

### рзи. Preemptive SJF (SRTF - Shortest Remaining Time First)
```
ржпрзЗржХрзЛржирзЛ рж╕ржоржпрж╝ ржЫрзЛржЯ ржкрзНрж░рж╕рзЗрж╕ ржПрж▓рзЗ ржмрж░рзНрждржорж╛ржи ржкрзНрж░рж╕рзЗрж╕ рж╕рж░рзЗ ржпрж╛ржпрж╝

P1 ржЪрж▓ржЫрзЗ    P2 ржЖрж╕рзЗ (ржЫрзЛржЯ)    P2 рж╢рзЗрж╖    P1 ржмрж╛ржХрж┐ ржЕржВрж╢
тЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтЦИтФВ
     P1     тФВ       P2       тФВ    P1 (ржмрж╛ржХрж┐)   тФВ
            тЖС                               
    P1 preempt рж╣рж▓рзЛ ржХрж╛рж░ржг P2 ржЫрзЛржЯ
```

---

## ЁЯТб ржЙржжрж╛рж╣рж░ржг рзз: Non-Preemptive SJF

### рж╕ржорж╕рзНржпрж╛
```
Process  Arrival Time  Burst Time
P1       0             7
P2       2             4
P3       4             1
P4       5             4
```

### рж╕ржорж╛ржзрж╛ржи

```
Step-by-step:
t=0: P1 ржЖрж╕рзЗ, P1 CPU ржкрж╛ржпрж╝ (ржПржХржорж╛рждрзНрж░)
t=2: P2 ржЖрж╕рзЗ, ржХрж┐ржирзНрждрзБ P1 ржЪрж▓ржЫрзЗ
t=4: P3 ржЖрж╕рзЗ, ржХрж┐ржирзНрждрзБ P1 ржЪрж▓ржЫрзЗ
t=5: P4 ржЖрж╕рзЗ, ржХрж┐ржирзНрждрзБ P1 ржЪрж▓ржЫрзЗ
t=7: P1 рж╢рзЗрж╖
     Ready Queue: P2(4), P3(1), P4(4)
     рж╕ржмржЪрзЗржпрж╝рзЗ ржЫрзЛржЯ P3(1), рждрж╛ржЗ P3 CPU ржкрж╛ржпрж╝
t=8: P3 рж╢рзЗрж╖
     Ready Queue: P2(4), P4(4)
     рж╕ржорж╛ржи рж╣рж▓рзЗ FCFS, рждрж╛ржЗ P2 CPU ржкрж╛ржпрж╝
t=12: P2 рж╢рзЗрж╖, P4 CPU ржкрж╛ржпрж╝
t=16: P4 рж╢рзЗрж╖

Gantt Chart:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ      P1     тФВP3 тФВ   P2   тФВ   P4   тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФШ
0             7   8        12       16

Calculation:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФР
тФВ Process тФВ AT тФВ BT тФВ CT тФВ TAT тФВ WT тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФд
тФВ P1      тФВ 0  тФВ 7  тФВ 7  тФВ 7   тФВ 0  тФВ
тФВ P2      тФВ 2  тФВ 4  тФВ 12 тФВ 10  тФВ 6  тФВ
тФВ P3      тФВ 4  тФВ 1  тФВ 8  тФВ 4   тФВ 3  тФВ
тФВ P4      тФВ 5  тФВ 4  тФВ 16 тФВ 11  тФВ 7  тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФШ

Average WT = (0 + 6 + 3 + 7) / 4 = 4
Average TAT = (7 + 10 + 4 + 11) / 4 = 8
```

---

## ЁЯТб ржЙржжрж╛рж╣рж░ржг рзи: Preemptive SJF (SRTF)

### рж╕ржорж╕рзНржпрж╛ (ржПржХржЗ)
```
Process  Arrival Time  Burst Time
P1       0             7
P2       2             4
P3       4             1
P4       5             4
```

### рж╕ржорж╛ржзрж╛ржи

```
Step-by-step:
t=0: P1 ржЖрж╕рзЗ (BT=7), P1 CPU ржкрж╛ржпрж╝
t=2: P2 ржЖрж╕рзЗ (BT=4)
     P1 Remaining = 7-2 = 5
     P2 Remaining = 4
     4 < 5, рждрж╛ржЗ P2 preempt ржХрж░рзЗ P1 ржХрзЗ!
t=4: P3 ржЖрж╕рзЗ (BT=1)
     P2 Remaining = 4-2 = 2
     P3 Remaining = 1
     1 < 2, рждрж╛ржЗ P3 preempt ржХрж░рзЗ P2 ржХрзЗ!
t=5: P3 рж╢рзЗрж╖, P4 ржЖрж╕рзЗ (BT=4)
     Ready: P1(5), P2(2), P4(4)
     P2 рж╕ржмржЪрзЗржпрж╝рзЗ ржЫрзЛржЯ (2), P2 CPU ржкрж╛ржпрж╝
t=7: P2 рж╢рзЗрж╖
     Ready: P1(5), P4(4)
     P4 ржЫрзЛржЯ (4), P4 CPU ржкрж╛ржпрж╝
t=11: P4 рж╢рзЗрж╖
     Ready: P1(5)
     P1 CPU ржкрж╛ржпрж╝
t=16: P1 рж╢рзЗрж╖

Gantt Chart:
тФМтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ P1 тФВ P2 тФВP3 тФВ P2 тФВ   P4   тФВ    P1     тФВ
тФФтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
0    2    4   5    7        11          16

Calculation:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФР
тФВ Process тФВ AT тФВ BT тФВ CT тФВ TAT тФВ WT тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФд
тФВ P1      тФВ 0  тФВ 7  тФВ 16 тФВ 16  тФВ 9  тФВ
тФВ P2      тФВ 2  тФВ 4  тФВ 7  тФВ 5   тФВ 1  тФВ
тФВ P3      тФВ 4  тФВ 1  тФВ 5  тФВ 1   тФВ 0  тФВ
тФВ P4      тФВ 5  тФВ 4  тФВ 11 тФВ 6   тФВ 2  тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФШ

Average WT = (9 + 1 + 0 + 2) / 4 = 3
Average TAT = (16 + 5 + 1 + 6) / 4 = 7
```

---

## ЁЯУК Non-Preemptive vs Preemptive SJF рждрзБрж▓ржирж╛

ржЙржкрж░рзЗрж░ ржПржХржЗ рж╕ржорж╕рзНржпрж╛рж░ ржЬржирзНржп:

| ржорж╛ржкржХрж╛ржарж┐ | Non-Preemptive | Preemptive (SRTF) |
|---------|----------------|-------------------|
| Avg WT | 4 | 3 тЬУ |
| Avg TAT | 8 | 7 тЬУ |
| Context Switches | 3 | 5 |
| Complexity | ржХржо | ржмрзЗрж╢рж┐ |

**SRTF рж╕ржмрж╕ржоржпрж╝ ржХржо Waiting Time ржжрзЗржпрж╝!**

---

## тЪая╕П Starvation рж╕ржорж╕рзНржпрж╛

```
Long Process Starvation:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ                                                      тФВ
тФВ  Time тЖТ  0    5    10   15   20   25   30   ...    тФВ
тФВ                                                      тФВ
тФВ  P1(20)  Waiting... Waiting... Waiting...           тФВ
тФВ  P2(2)   тЦИтЦИ                                         тФВ
тФВ  P3(1)     тЦИ                                        тФВ
тФВ  P4(3)      тЦИтЦИтЦИ                                     тФВ
тФВ  P5(2)         тЦИтЦИ                                   тФВ
тФВ  ...      ржЫрзЛржЯ process ржЖрж╕рждрзЗржЗ ржерж╛ржХрзЗ                   тФВ
тФВ                                                      тФВ
тФВ  P1 ржХржЦржирзЛржЗ CPU ржкрж╛ржпрж╝ ржирж╛! (Starvation)                 тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

### рж╕ржорж╛ржзрж╛ржи: Aging
```
рж╕ржоржпрж╝рзЗрж░ рж╕рж╛ржерзЗ Priority/Effective Burst Time ржХржорж╛ржирзЛ:

Effective BT = Original BT - (Waiting Time ├Ч Factor)

P1 ржЕржирзЗржХржХрзНрж╖ржг ржЕржкрзЗржХрзНрж╖рж╛ржпрж╝ тЖТ Effective BT ржХржорзЗ тЖТ рж╢рзЗрж╖рзЗ CPU ржкрж╛ржпрж╝
```

---

## тЭУ Burst Time ржХрж┐ржнрж╛ржмрзЗ ржЬрж╛ржиржмрзЛ?

### рж╕ржорж╕рзНржпрж╛
SJF ржПрж░ ржЬржирзНржп Burst Time ржЖржЧрзЗ ржерзЗржХрзЗ ржЬрж╛ржирж╛ ржжрж░ржХрж╛рж░, ржХрж┐ржирзНрждрзБ ржПржЯрж╛ рж╕ржорзНржнржм ржиржпрж╝!

### рж╕ржорж╛ржзрж╛ржи: Prediction
```
Exponential Averaging:

╧ДтВЩтВКтВБ = ╬▒ ├Ч tтВЩ + (1 - ╬▒) ├Ч ╧ДтВЩ

ржпрзЗржЦрж╛ржирзЗ:
╧ДтВЩтВКтВБ = ржкрж░ржмрж░рзНрждрзА burst ржПрж░ prediction
tтВЩ   = рж╕рж░рзНржмрж╢рзЗрж╖ actual burst
╧ДтВЩ   = рж╕рж░рзНржмрж╢рзЗрж╖ prediction
╬▒    = 0 тЙд ╬▒ тЙд 1 (рж╕рж╛ржзрж╛рж░ржгржд 0.5)

ржЙржжрж╛рж╣рж░ржг (╬▒ = 0.5):
╧ДтВА = 10 (initial guess)
tтВБ = 6  (actual)
╧ДтВВ = 0.5 ├Ч 6 + 0.5 ├Ч 10 = 8
tтВВ = 4  (actual)
╧ДтВГ = 0.5 ├Ч 4 + 0.5 ├Ч 8 = 6
```

---

## ЁЯТ╗ ржЕрзНржпрж╛рж▓ржЧрж░рж┐ржжржо (Non-Preemptive)

```python
def sjf_non_preemptive(processes):
    current_time = 0
    completed = []
    ready_queue = []
    
    while len(completed) < len(processes):
        # ржирждрзБржи ржЖрж╕рж╛ ржкрзНрж░рж╕рзЗрж╕ ready queue рждрзЗ
        for p in processes:
            if p.arrival_time <= current_time and p not in ready_queue and p not in completed:
                ready_queue.append(p)
        
        if ready_queue:
            # рж╕ржмржЪрзЗржпрж╝рзЗ ржЫрзЛржЯ burst time ржмрж╛ржЫрж╛ржЗ
            ready_queue.sort(key=lambda x: x.burst_time)
            current_process = ready_queue.pop(0)
            
            current_time += current_process.burst_time
            current_process.completion_time = current_time
            completed.append(current_process)
        else:
            current_time += 1
    
    return completed
```

---

## тЬЕ рж╕рзБржмрж┐ржзрж╛

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  тЬУ рж╕рж░рзНржмржирж┐ржорзНржи Average Waiting Time                  тФВ
тФВ  тЬУ Optimal (ржкрзНрж░ржорж╛ржгрж┐ржд)                             тФВ
тФВ  тЬУ ржЫрзЛржЯ ржкрзНрж░рж╕рзЗрж╕ ржжрзНрж░рзБржд рж╢рзЗрж╖ рж╣ржпрж╝                       тФВ
тФВ  тЬУ ржмрзЗрж╢рж┐ Throughput                               тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## тЭМ ржЕрж╕рзБржмрж┐ржзрж╛

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  тЬЧ Starvation (ржмржбрж╝ ржкрзНрж░рж╕рзЗрж╕рзЗрж░)                      тФВ
тФВ  тЬЧ Burst Time ржЖржЧрзЗ ржЬрж╛ржирж╛ ржХржарж┐ржи                      тФВ
тФВ  тЬЧ Prediction overhead                           тФВ
тФВ  тЬЧ SRTF ржП ржмрзЗрж╢рж┐ Context Switch                    тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

---

## тЭУ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзНрж░рж╢рзНржи

**ржкрзНрж░рж╢рзНржи рзз:** SJF ржХрзЗ ржХрзЗржи Optimal ржмрж▓рж╛ рж╣ржпрж╝?
**ржЙрждрзНрждрж░:** ржХрж╛рж░ржг ржПржЯрж┐ рж╕рж░рзНржмржирж┐ржорзНржи Average Waiting Time ржжрзЗржпрж╝ред ржЧрж╛ржгрж┐рждрж┐ржХржнрж╛ржмрзЗ ржкрзНрж░ржорж╛ржгрж┐рждред

**ржкрзНрж░рж╢рзНржи рзи:** SRTF ржХрж┐?
**ржЙрждрзНрждрж░:** Shortest Remaining Time First - SJF ржПрж░ Preemptive versionред

**ржкрзНрж░рж╢рзНржи рзй:** SJF рждрзЗ Starvation ржХрж┐ржнрж╛ржмрзЗ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ ржпрж╛ржпрж╝?
**ржЙрждрзНрждрж░:** Aging technique ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

---
**ржкрзВрж░рзНржмржмрж░рзНрждрзА:** [FCFS](03-fcfs.md)  
**ржкрж░ржмрж░рзНрждрзА:** [Priority Scheduling](05-priority.md)
