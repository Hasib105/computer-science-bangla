# Communication in Distributed Systems

## ğŸ“Œ Communication Methods

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚   Distributed systems communicate via:                      â”‚
â”‚                                                             â”‚
â”‚   1. Message Passing                                        â”‚
â”‚      Explicit send/receive of messages                      â”‚
â”‚                                                             â”‚
â”‚   2. Remote Procedure Call (RPC)                            â”‚
â”‚      Call procedure on remote machine                       â”‚
â”‚                                                             â”‚
â”‚   3. Remote Method Invocation (RMI)                         â”‚
â”‚      OOP version of RPC (Java)                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¨ Message Passing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Message Passing                          â”‚
â”‚                                                             â”‚
â”‚   Process A                           Process B             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚         â”‚                        â”‚         â”‚           â”‚
â”‚   â”‚  send() â”œâ”€â”€â”€â”€â”€â”€â”€â”€ Message â”€â”€â”€â”€â”€â”€â–ºâ”‚ receive()â”‚          â”‚
â”‚   â”‚         â”‚                        â”‚         â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”‚   Synchronous (Blocking):                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                     â”‚  â”‚
â”‚   â”‚   Sender        â”‚ Message â”‚        Receiver        â”‚  â”‚
â”‚   â”‚   send()â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â–ºreceive()       â”‚  â”‚
â”‚   â”‚     â”‚           â”‚         â”‚           â”‚            â”‚  â”‚
â”‚   â”‚   blocked       â”‚         â”‚        blocked         â”‚  â”‚
â”‚   â”‚     â”‚           â”‚         â”‚        until msg       â”‚  â”‚
â”‚   â”‚     â–¼           â”‚         â”‚           â–¼            â”‚  â”‚
â”‚   â”‚   continues     â”‚         â”‚        continues       â”‚  â”‚
â”‚   â”‚   after ACK     â”‚         â”‚        after receive   â”‚  â”‚
â”‚   â”‚                                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚   Asynchronous (Non-blocking):                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚   Sender: send() and continue immediately          â”‚  â”‚
â”‚   â”‚   Message buffered                                  â”‚  â”‚
â”‚   â”‚   Receiver: check buffer when ready                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Remote Procedure Call (RPC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          RPC                                â”‚
â”‚                                                             â”‚
â”‚   Make remote call look like local call                     â”‚
â”‚                                                             â”‚
â”‚   Local call:                                               â”‚
â”‚   result = add(5, 3);   // Same machine                    â”‚
â”‚                                                             â”‚
â”‚   RPC call:                                                 â”‚
â”‚   result = add(5, 3);   // Different machine!              â”‚
â”‚   (Looks same, but executed remotely)                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RPC Mechanism

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     RPC Steps                               â”‚
â”‚                                                             â”‚
â”‚   Client Machine                    Server Machine          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚              â”‚                 â”‚              â”‚        â”‚
â”‚   â”‚ 1. Client    â”‚                 â”‚ 6. Server    â”‚        â”‚
â”‚   â”‚    calls     â”‚                 â”‚    executes  â”‚        â”‚
â”‚   â”‚    stub      â”‚                 â”‚    procedure â”‚        â”‚
â”‚   â”‚      â”‚       â”‚                 â”‚      â–²       â”‚        â”‚
â”‚   â”‚      â–¼       â”‚                 â”‚      â”‚       â”‚        â”‚
â”‚   â”‚ 2. Client    â”‚                 â”‚ 5. Server    â”‚        â”‚
â”‚   â”‚    stub      â”‚                 â”‚    stub      â”‚        â”‚
â”‚   â”‚   marshals   â”‚                 â”‚   unmarshals â”‚        â”‚
â”‚   â”‚   params     â”‚                 â”‚    params    â”‚        â”‚
â”‚   â”‚      â”‚       â”‚                 â”‚      â–²       â”‚        â”‚
â”‚   â”‚      â–¼       â”‚                 â”‚      â”‚       â”‚        â”‚
â”‚   â”‚ 3. Send      â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚ 4. Receive   â”‚        â”‚
â”‚   â”‚    message   â”‚    Network      â”‚    message   â”‚        â”‚
â”‚   â”‚              â”‚                 â”‚              â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚         â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚            7. Return result (same path back)                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Marshalling/Serialization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚   Marshalling = Convert data to transmittable format        â”‚
â”‚                                                             â”‚
â”‚   Problem: Different machines have different:               â”‚
â”‚   â€¢ Byte order (Big-endian vs Little-endian)               â”‚
â”‚   â€¢ Data size (int = 32-bit or 64-bit?)                    â”‚
â”‚   â€¢ Character encoding (ASCII vs UTF-8)                    â”‚
â”‚                                                             â”‚
â”‚   Solution: Standard format for transmission                â”‚
â”‚                                                             â”‚
â”‚   Local data           Marshalled            Network        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ int: 42 â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚ bytes:  â”‚ â”€â”€â”€â”€â”€â”€â”€â–º â”‚ bytes   â”‚    â”‚
â”‚   â”‚str:"Hi" â”‚ Marshal â”‚ 00 2A   â”‚ Transmit â”‚         â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ 48 69   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                             â”‚
â”‚   Formats: JSON, XML, Protocol Buffers, MessagePack        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Sockets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Socket API                             â”‚
â”‚                                                             â”‚
â”‚   Socket = Endpoint for communication                       â”‚
â”‚                                                             â”‚
â”‚   Server:                           Client:                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ 1. socket()      â”‚             â”‚ 1. socket()      â”‚    â”‚
â”‚   â”‚ 2. bind(port)    â”‚             â”‚                  â”‚    â”‚
â”‚   â”‚ 3. listen()      â”‚             â”‚                  â”‚    â”‚
â”‚   â”‚ 4. accept() â—„â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ 2. connect()   â”‚    â”‚
â”‚   â”‚      â”‚           â”‚  Connection â”‚                  â”‚    â”‚
â”‚   â”‚ 5. read/write â—„â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ 3. read/write  â”‚    â”‚
â”‚   â”‚ 6. close()       â”‚             â”‚ 4. close()       â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Socket Code Example

```python
# Server
import socket

server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server.bind(('localhost', 8080))
server.listen(1)

client, addr = server.accept()
data = client.recv(1024)
client.send(b"Hello from server!")
client.close()

# Client
client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect(('localhost', 8080))
client.send(b"Hello from client!")
response = client.recv(1024)
client.close()
```

---

## ğŸ“Š Communication Patterns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚   1. Request-Reply (Synchronous)                           â”‚
â”‚      Client â”€â”€Requestâ”€â”€â–º Server                            â”‚
â”‚      Client â—„â”€â”€Replyâ”€â”€â”€â”€ Server                            â”‚
â”‚                                                             â”‚
â”‚   2. One-way (Asynchronous)                                â”‚
â”‚      Sender â”€â”€Messageâ”€â”€â–º Receiver                          â”‚
â”‚      (No reply expected)                                    â”‚
â”‚                                                             â”‚
â”‚   3. Publish-Subscribe                                      â”‚
â”‚      Publisher â”€â”€â–º Topic â”€â”€â–º Subscriber1                   â”‚
â”‚                         â”€â”€â–º Subscriber2                    â”‚
â”‚                         â”€â”€â–º Subscriber3                    â”‚
â”‚                                                             â”‚
â”‚   4. Message Queue                                          â”‚
â”‚      Producer â”€â”€â–º Queue â”€â”€â–º Consumer                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â“ à¦—à§à¦°à§à¦¤à§à¦¬à¦ªà§‚à¦°à§à¦£ à¦ªà§à¦°à¦¶à§à¦¨

**à¦ªà§à¦°à¦¶à§à¦¨ à§§:** RPC vs Message Passing?

| RPC | Message Passing |
|-----|-----------------|
| Looks like function call | Explicit send/receive |
| Synchronous typically | Can be async |
| Abstraction higher | Lower level |
| Stubs handle details | Manual marshalling |

**à¦ªà§à¦°à¦¶à§à¦¨ à§¨:** Marshalling à¦•à§‡à¦¨ à¦¦à¦°à¦•à¦¾à¦°?
**à¦‰à¦¤à§à¦¤à¦°:** Different machines à¦ different data representation à¦¥à¦¾à¦•à§‡ (byte order, size, encoding)à¥¤ Marshalling à¦à¦—à§à¦²à§‹ standard format à¦ convert à¦•à¦°à§‡ network transmission à¦à¦° à¦œà¦¨à§à¦¯à¥¤

**à¦ªà§à¦°à¦¶à§à¦¨ à§©:** Synchronous vs Asynchronous communication?

| Synchronous | Asynchronous |
|-------------|--------------|
| Sender waits | Sender continues |
| Simpler | More complex |
| Blocking | Non-blocking |
| Lower throughput | Higher throughput |

---
**à¦ªà§‚à¦°à§à¦¬à¦¬à¦°à§à¦¤à§€:** [Distributed Basics](01-distributed-basics.md)  
**à¦ªà¦°à¦¬à¦°à§à¦¤à§€:** [Synchronization](03-synchronization.md)
