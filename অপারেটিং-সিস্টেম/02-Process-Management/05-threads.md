# à¦¥à§à¦°à§‡à¦¡ (Threads)

## ğŸ“Œ à¦¥à§à¦°à§‡à¦¡ à¦•à¦¿?

**à¦¥à§à¦°à§‡à¦¡** à¦¹à¦²à§‹ à¦ªà§à¦°à¦¸à§‡à¦¸à§‡à¦° à¦®à¦§à§à¦¯à§‡ execution à¦à¦° à¦à¦•à¦•à¥¤ à¦à¦•à¦Ÿà¦¿ à¦ªà§à¦°à¦¸à§‡à¦¸à§‡ à¦à¦•à¦¾à¦§à¦¿à¦• à¦¥à§à¦°à§‡à¦¡ à¦¥à¦¾à¦•à¦¤à§‡ à¦ªà¦¾à¦°à§‡ à¦à¦¬à¦‚ à¦¤à¦¾à¦°à¦¾ à¦à¦•à¦‡ à¦®à§‡à¦®à¦°à¦¿ à¦¸à§à¦ªà§‡à¦¸ à¦¶à§‡à¦¯à¦¼à¦¾à¦° à¦•à¦°à§‡à¥¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Process                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Shared Resources                    â”‚   â”‚
â”‚  â”‚  â€¢ Code Section                                  â”‚   â”‚
â”‚  â”‚  â€¢ Data Section                                  â”‚   â”‚
â”‚  â”‚  â€¢ Heap                                          â”‚   â”‚
â”‚  â”‚  â€¢ Open Files                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Thread 1 â”‚  â”‚ Thread 2 â”‚  â”‚ Thread 3 â”‚              â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚              â”‚
â”‚  â”‚ Stack    â”‚  â”‚ Stack    â”‚  â”‚ Stack    â”‚              â”‚
â”‚  â”‚ Registersâ”‚  â”‚ Registersâ”‚  â”‚ Registersâ”‚              â”‚
â”‚  â”‚ PC       â”‚  â”‚ PC       â”‚  â”‚ PC       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ†š à¦ªà§à¦°à¦¸à§‡à¦¸ vs à¦¥à§à¦°à§‡à¦¡

### à¦¤à§à¦²à¦¨à¦¾à¦®à§‚à¦²à¦• à¦šà¦¿à¦¤à§à¦°

```
Single Process:                 Multithreaded Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Process    â”‚                â”‚       Process           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚Thread â”‚  â”‚                â”‚  â”‚  Thread Thread  â”‚   â”‚
â”‚  â”‚  â†“    â”‚  â”‚                â”‚  â”‚    â†“      â†“     â”‚   â”‚
â”‚  â”‚ Stack â”‚  â”‚                â”‚  â”‚  Stack  Stack   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Data  â”‚  â”‚                â”‚  â”‚      Data       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Code  â”‚  â”‚                â”‚  â”‚      Code       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à¦¤à§à¦²à¦¨à¦¾à¦®à§‚à¦²à¦• à¦¸à¦¾à¦°à¦£à§€

| à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯ | à¦ªà§à¦°à¦¸à§‡à¦¸ | à¦¥à§à¦°à§‡à¦¡ |
|----------|--------|-------|
| à¦®à§‡à¦®à¦°à¦¿ | à¦¨à¦¿à¦œà¦¸à§à¦¬ (à¦†à¦²à¦¾à¦¦à¦¾) | à¦¶à§‡à¦¯à¦¼à¦¾à¦°à§à¦¡ |
| à¦¤à§ˆà¦°à¦¿à¦° à¦¸à¦®à¦¯à¦¼ | à¦¬à§‡à¦¶à¦¿ | à¦•à¦® |
| Context Switch | à¦§à§€à¦° (expensive) | à¦¦à§à¦°à§à¦¤ (cheap) |
| à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— | IPC (à¦œà¦Ÿà¦¿à¦²) | Shared memory (à¦¸à¦¹à¦œ) |
| Crash à¦ªà§à¦°à¦­à¦¾à¦¬ | à¦¶à§à¦§à§ à¦¸à§‡à¦‡ à¦ªà§à¦°à¦¸à§‡à¦¸ | à¦ªà§à¦°à§‹ à¦ªà§à¦°à¦¸à§‡à¦¸ |
| Resource Overhead | à¦¬à§‡à¦¶à¦¿ | à¦•à¦® |
| Independent | à¦¹à§à¦¯à¦¾à¦ | à¦¨à¦¾ |

---

## ğŸ—ï¸ à¦¥à§à¦°à§‡à¦¡à§‡à¦° à¦•à¦®à§à¦ªà§‹à¦¨à§‡à¦¨à§à¦Ÿ

### à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦¥à§à¦°à§‡à¦¡à§‡à¦° à¦¨à¦¿à¦œà¦¸à§à¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Thread-Specific            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Thread ID                       â”‚
â”‚  â€¢ Program Counter                 â”‚
â”‚  â€¢ Register Set                    â”‚
â”‚  â€¢ Stack                           â”‚
â”‚  â€¢ State (Ready, Running, etc.)    â”‚
â”‚  â€¢ Priority                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à¦¥à§à¦°à§‡à¦¡à¦—à§à¦²à§‹ à¦¶à§‡à¦¯à¦¼à¦¾à¦° à¦•à¦°à§‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Shared                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Code Section                    â”‚
â”‚  â€¢ Data Section                    â”‚
â”‚  â€¢ Heap                            â”‚
â”‚  â€¢ Open Files                      â”‚
â”‚  â€¢ Signals                         â”‚
â”‚  â€¢ Environment Variables           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š à¦¥à§à¦°à§‡à¦¡à§‡à¦° à¦¸à§à¦¬à¦¿à¦§à¦¾

### à§§. Responsiveness
```
Single Thread:                  Multi Thread:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI Thread  â”‚               â”‚   UI Thread  â”‚ â† Always responsive
â”‚      +       â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Heavy Work  â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â†“       â”‚               â”‚ Worker Threadâ”‚ â† Heavy work
â”‚   UI Frozen  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               
```

### à§¨. Resource Sharing
```
Process-based:                  Thread-based:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Process 1â”‚ â”‚Process 2â”‚        â”‚      Process        â”‚
â”‚         â”‚ â”‚         â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ Memory Aâ”‚ â”‚ Memory Aâ”‚        â”‚  â”‚Thread1â”‚Thread2â”‚  â”‚
â”‚  (copy) â”‚ â”‚  (copy) â”‚        â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚      â”‚       â”‚      â”‚
                               â”‚   Shared Memory     â”‚
    à¦®à§‡à¦®à¦°à¦¿ à¦¬à§‡à¦¶à¦¿ à¦²à¦¾à¦—à§‡             â”‚      (à¦à¦•à¦Ÿà¦¾à¦‡)        â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à§©. Economy
```
Creation Time:
Process: 100ms
Thread:  1ms

Context Switch:
Process: 10ms
Thread:  0.5ms
```

### à§ª. Scalability
```
Single-core:           Multi-core:
Thread 1 â†’ â–ˆâ–ˆâ–ˆâ–ˆ         Core 1: Thread 1 â†’ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Thread 2 â†’     â–ˆâ–ˆâ–ˆâ–ˆ     Core 2: Thread 2 â†’ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
         Sequential              Parallel (2x faster)
```

---

## ğŸ”„ à¦¥à§à¦°à§‡à¦¡à§‡à¦° à¦ªà§à¦°à¦•à¦¾à¦°à¦­à§‡à¦¦

### à§§. User-Level Threads (ULT)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User Space                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        Thread Library           â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚   â”‚ ULT â”‚ â”‚ ULT â”‚ â”‚ ULT â”‚      â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                 â†“                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Kernel                      â”‚
â”‚         (à¦à¦•à¦Ÿà¦¾à¦‡ Thread à¦¦à§‡à¦–à§‡)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**à¦¸à§à¦¬à¦¿à¦§à¦¾:**
- à¦¦à§à¦°à§à¦¤ thread switch
- Kernel involvement à¦¨à§‡à¦‡
- à¦¯à§‡à¦•à§‹à¦¨à§‹ OS à¦ à¦šà¦²à§‡

**à¦…à¦¸à§à¦¬à¦¿à¦§à¦¾:**
- à¦à¦•à¦Ÿà¦¾ block à¦¹à¦²à§‡ à¦¸à¦¬ block
- Multi-core à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡ à¦¨à¦¾

### à§¨. Kernel-Level Threads (KLT)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User Space                  â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚       â”‚ T1  â”‚ â”‚ T2  â”‚ â”‚ T3  â”‚           â”‚
â”‚       â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â†“       â†“       â†“   Kernel     â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚       â”‚ KLT â”‚ â”‚ KLT â”‚ â”‚ KLT â”‚           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜           â”‚
â”‚      (à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¾à¦° à¦œà¦¨à§à¦¯ à¦†à¦²à¦¾à¦¦à¦¾ KLT)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**à¦¸à§à¦¬à¦¿à¦§à¦¾:**
- à¦à¦•à¦Ÿà¦¾ block à¦¹à¦²à§‡ à¦…à¦¨à§à¦¯à¦—à§à¦²à§‹ à¦šà¦²à¦¤à§‡ à¦ªà¦¾à¦°à§‡
- Multi-core à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡

**à¦…à¦¸à§à¦¬à¦¿à¦§à¦¾:**
- Kernel call à¦à¦° overhead
- à¦¤à§à¦²à¦¨à¦¾à¦®à§‚à¦²à¦• à¦§à§€à¦° switching

### à§©. Hybrid (Many-to-Many)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User Space                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚ ULT â”‚ â”‚ ULT â”‚ â”‚ ULT â”‚ â”‚ ULT â”‚      â”‚
â”‚    â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜      â”‚
â”‚       â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â†“               â†“    Kernel   â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”           â”‚
â”‚       â”‚ KLT â”‚         â”‚ KLT â”‚           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜           â”‚
â”‚    (M user threads â†’ N kernel threads)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» à¦¥à§à¦°à§‡à¦¡ à¦ªà§à¦°à§‹à¦—à§à¦°à¦¾à¦®à¦¿à¦‚

### POSIX Threads (pthreads)

```c
#include <stdio.h>
#include <pthread.h>

void* thread_function(void* arg) {
    int* num = (int*)arg;
    printf("Thread: received %d\n", *num);
    return NULL;
}

int main() {
    pthread_t thread;
    int value = 42;
    
    // à¦¥à§à¦°à§‡à¦¡ à¦¤à§ˆà¦°à¦¿
    pthread_create(&thread, NULL, thread_function, &value);
    
    printf("Main: created thread\n");
    
    // à¦¥à§à¦°à§‡à¦¡ à¦¶à§‡à¦· à¦¹à¦“à¦¯à¦¼à¦¾à¦° à¦œà¦¨à§à¦¯ à¦…à¦ªà§‡à¦•à§à¦·à¦¾
    pthread_join(thread, NULL);
    
    printf("Main: thread finished\n");
    return 0;
}
```

**à¦•à¦®à§à¦ªà¦¾à¦‡à¦²:**
```bash
gcc -pthread program.c -o program
```

### à¦à¦•à¦¾à¦§à¦¿à¦• à¦¥à§à¦°à§‡à¦¡ à¦‰à¦¦à¦¾à¦¹à¦°à¦£

```c
#include <stdio.h>
#include <pthread.h>

#define NUM_THREADS 5

void* print_hello(void* thread_id) {
    long tid = (long)thread_id;
    printf("Hello from thread %ld\n", tid);
    pthread_exit(NULL);
}

int main() {
    pthread_t threads[NUM_THREADS];
    
    for (long i = 0; i < NUM_THREADS; i++) {
        pthread_create(&threads[i], NULL, print_hello, (void*)i);
    }
    
    // à¦¸à¦¬ à¦¥à§à¦°à§‡à¦¡ à¦¶à§‡à¦· à¦¹à¦“à¦¯à¦¼à¦¾à¦° à¦œà¦¨à§à¦¯ à¦…à¦ªà§‡à¦•à§à¦·à¦¾
    for (int i = 0; i < NUM_THREADS; i++) {
        pthread_join(threads[i], NULL);
    }
    
    printf("All threads completed\n");
    return 0;
}
```

---

## âš ï¸ à¦¥à§à¦°à§‡à¦¡à§‡à¦° à¦šà§à¦¯à¦¾à¦²à§‡à¦à§à¦œ

### Race Condition

```c
int counter = 0;  // Shared variable

// Thread 1 à¦à¦¬à¦‚ 2 à¦¦à§à¦œà¦¨à§‡à¦‡ à¦à¦Ÿà¦¾ à¦•à¦°à§‡:
void increment() {
    counter++;  // à¦à¦Ÿà¦¾ Atomic à¦¨à¦¯à¦¼!
}

// à¦†à¦¸à¦²à§‡ à¦¯à¦¾ à¦¹à¦¯à¦¼:
// 1. Read counter
// 2. Add 1
// 3. Write counter

// à¦¸à¦®à¦¸à§à¦¯à¦¾:
Thread 1:  Read(0)   Add(1)   Write(1)
Thread 2:       Read(0)   Add(1)   Write(1)
                                          
Result: counter = 1 (à¦¹à¦“à¦¯à¦¼à¦¾ à¦‰à¦šà¦¿à¦¤ à¦›à¦¿à¦² 2)
```

### à¦¸à¦®à¦¾à¦§à¦¾à¦¨: Mutex

```c
#include <pthread.h>

int counter = 0;
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;

void* increment(void* arg) {
    for (int i = 0; i < 100000; i++) {
        pthread_mutex_lock(&lock);   // Lock
        counter++;
        pthread_mutex_unlock(&lock); // Unlock
    }
    return NULL;
}
```

---

## ğŸ“Š Threading Models

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Threading Models                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Many-to-One     â”‚   One-to-One      â”‚   Many-to-Many   â”‚
â”‚                   â”‚                   â”‚                  â”‚
â”‚   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”    â”‚   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”  â”‚
â”‚   â”‚ULTâ”‚ULTâ”‚ULTâ”‚   â”‚   â”‚ULTâ”‚ â”‚ULTâ”‚    â”‚   â”‚ULTâ”‚ULTâ”‚ULTâ”‚  â”‚
â”‚   â””â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”˜   â”‚   â””â”€â”¬â”€â”˜ â””â”€â”¬â”€â”˜    â”‚   â””â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”˜  â”‚
â”‚     â””â”€â”€â”€â”¼â”€â”€â”€â”˜     â”‚     â”‚     â”‚      â”‚     â””â”€â”€â”€â”¼â”€â”€â”€â”˜    â”‚
â”‚         â†“         â”‚     â†“     â†“      â”‚         â†“        â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”      â”‚   â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”   â”‚      â”Œâ”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚ KLT â”‚      â”‚   â”‚KLTâ”‚ â”‚KLTâ”‚   â”‚      â”‚ KLT â”‚     â”‚
â”‚      â””â”€â”€â”€â”€â”€â”˜      â”‚   â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜   â”‚      â””â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                   â”‚                   â”‚                  â”‚
â”‚ Example:          â”‚ Example:          â”‚ Example:         â”‚
â”‚ Green Threads     â”‚ Windows, Linux    â”‚ Solaris          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â“ à¦—à§à¦°à§à¦¤à§à¦¬à¦ªà§‚à¦°à§à¦£ à¦ªà§à¦°à¦¶à§à¦¨

**à¦ªà§à¦°à¦¶à§à¦¨ à§§:** à¦¥à§à¦°à§‡à¦¡ à¦•à§‡à¦¨ à¦ªà§à¦°à¦¸à§‡à¦¸à§‡à¦° à¦šà§‡à¦¯à¦¼à§‡ lightweight?

**à¦‰à¦¤à§à¦¤à¦°:** à¦•à¦¾à¦°à¦£ à¦¥à§à¦°à§‡à¦¡:
- à¦¨à¦¿à¦œà¦¸à§à¦¬ address space à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§‡ à¦¨à¦¾
- Code, data, heap à¦¶à§‡à¦¯à¦¼à¦¾à¦° à¦•à¦°à§‡
- Context switch à¦ à¦•à¦® à¦¤à¦¥à§à¦¯ save à¦•à¦°à¦¤à§‡ à¦¹à¦¯à¦¼

**à¦ªà§à¦°à¦¶à§à¦¨ à§¨:** User-level à¦“ Kernel-level thread à¦à¦° à¦ªà¦¾à¦°à§à¦¥à¦•à§à¦¯ à¦•à¦¿?

| ULT | KLT |
|-----|-----|
| Kernel à¦œà¦¾à¦¨à§‡ à¦¨à¦¾ | Kernel à¦œà¦¾à¦¨à§‡ |
| à¦¦à§à¦°à§à¦¤ switch | à¦§à§€à¦° switch |
| Block = à¦¸à¦¬ block | Block = à¦¶à§à¦§à§ à¦¸à§‡à¦‡ thread |
| No parallel execution | Parallel possible |

**à¦ªà§à¦°à¦¶à§à¦¨ à§©:** Race Condition à¦•à¦¿?
**à¦‰à¦¤à§à¦¤à¦°:** à¦¯à¦–à¦¨ à¦à¦•à¦¾à¦§à¦¿à¦• à¦¥à§à¦°à§‡à¦¡ à¦à¦•à¦‡ à¦¡à§‡à¦Ÿà¦¾ à¦à¦•à¦¸à¦¾à¦¥à§‡ access à¦•à¦°à§‡ à¦à¦¬à¦‚ à¦«à¦²à¦¾à¦«à¦² execution order à¦à¦° à¦‰à¦ªà¦° à¦¨à¦¿à¦°à§à¦­à¦° à¦•à¦°à§‡à¥¤

---
**à¦ªà§‚à¦°à§à¦¬à¦¬à¦°à§à¦¤à§€:** [à¦ªà§à¦°à¦¸à§‡à¦¸ à¦…à¦ªà¦¾à¦°à§‡à¦¶à¦¨](04-process-operations.md)  
**à¦ªà¦°à¦¬à¦°à§à¦¤à§€:** [Inter-Process Communication](06-ipc.md)
