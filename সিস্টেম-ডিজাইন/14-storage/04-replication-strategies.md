# Data Replication Strategies

## ğŸ¯ Replication à¦•à§‡à¦¨ à¦¦à¦°à¦•à¦¾à¦°?

```
à§§. Fault Tolerance: Node fail à¦•à¦°à¦²à§‡à¦“ data à¦¥à¦¾à¦•à§‡
à§¨. High Availability: Multiple sources à¦¥à§‡à¦•à§‡ read
à§©. Geographic Distribution: Users-à¦à¦° à¦•à¦¾à¦›à§‡ data
à§ª. Load Balancing: Read traffic distribute
```

## ğŸ“Š Replication Strategies

### à§§. Single-Leader Replication
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Single-Leader Replication                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   Writes â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚    Leader    â”‚                            â”‚
â”‚                    â”‚   (Primary)  â”‚                            â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                           â”‚                                     â”‚
â”‚            Replication    â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â†“                 â†“                 â†“                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ Follower â”‚     â”‚ Follower â”‚     â”‚ Follower â”‚              â”‚
â”‚   â”‚ (Replica)â”‚     â”‚ (Replica)â”‚     â”‚ (Replica)â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚        â†‘                â†‘                â†‘                     â”‚
â”‚        â”‚                â”‚                â”‚                     â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                     Reads                                       â”‚
â”‚                                                                 â”‚
â”‚  Pros: Simple, consistent                                      â”‚
â”‚  Cons: Leader is bottleneck, single point of failure          â”‚
â”‚  Used by: PostgreSQL, MySQL, MongoDB                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à§¨. Multi-Leader Replication
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Multi-Leader Replication                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Datacenter A              Datacenter B                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  Leader  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Leader  â”‚                       â”‚
â”‚   â”‚    A     â”‚  Sync writes â”‚    B     â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚        â”‚                         â”‚                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚Follower â”‚               â”‚Follower â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                 â”‚
â”‚  Pros: Better write throughput, geographic distribution        â”‚
â”‚  Cons: Conflict resolution needed                              â”‚
â”‚  Used by: CouchDB, multi-datacenter setups                     â”‚
â”‚                                                                 â”‚
â”‚  Conflict Resolution:                                          â”‚
â”‚  - Last write wins (timestamp)                                 â”‚
â”‚  - Application-level merge                                     â”‚
â”‚  - CRDTs                                                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à§©. Leaderless Replication
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Leaderless Replication                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                      Client                                     â”‚
â”‚                        â”‚                                        â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚          â”‚             â”‚             â”‚                         â”‚
â”‚          â†“             â†“             â†“                         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚     â”‚ Node 1  â”‚  â”‚ Node 2  â”‚  â”‚ Node 3  â”‚                     â”‚
â”‚     â”‚  W: âœ“   â”‚  â”‚  W: âœ“   â”‚  â”‚  W: X   â”‚                     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                 â”‚
â”‚  Write to W nodes, read from R nodes                           â”‚
â”‚  Quorum: W + R > N                                             â”‚
â”‚                                                                 â”‚
â”‚  Example: N=3, W=2, R=2                                        â”‚
â”‚  Write succeeds if 2/3 nodes ACK                               â”‚
â”‚  Read from 2 nodes, take latest                                â”‚
â”‚                                                                 â”‚
â”‚  Pros: No single point of failure, high availability          â”‚
â”‚  Cons: Eventual consistency, read repair needed                â”‚
â”‚  Used by: Cassandra, DynamoDB, Riak                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Sync vs Async Replication

```
Synchronous:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   Write   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   Sync   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Leader â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Follower â”‚
â”‚        â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”‚   ACK    â”‚
â”‚        â”‚   ACK     â”‚        â”‚         â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ“ Strong consistency
âœ— Higher latency

Asynchronous:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   Write   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   Async  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Leader â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Follower â”‚
â”‚        â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚         â”‚ (later)  â”‚
â”‚        â”‚   ACK     â”‚        â”‚         â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ“ Lower latency
âœ— Potential data loss

Semi-synchronous:
At least 1 follower is sync, rest async
Balance between consistency and performance
```

## ğŸ’¡ Choosing Strategy

```
Single-Leader:
âœ“ Strong consistency needed
âœ“ Simple conflict resolution
âœ“ Traditional databases

Multi-Leader:
âœ“ Multi-datacenter
âœ“ Offline clients
âœ“ Collaborative editing

Leaderless:
âœ“ High availability
âœ“ Partition tolerance
âœ“ Write-heavy workloads
```

---

ğŸ‰ à¦¸à§à¦Ÿà§‹à¦°à§‡à¦œ à¦¸à§‡à¦•à¦¶à¦¨ à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£!
