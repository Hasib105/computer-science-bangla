# Distributed File Systems

## ğŸ¯ Distributed File System à¦•à¦¿?

**Distributed File System (DFS)** à¦à¦•à¦¾à¦§à¦¿à¦• servers à¦œà§à¦¡à¦¼à§‡ files store à¦•à¦°à§‡, single file system à¦¹à¦¿à¦¸à§‡à¦¬à§‡ access à¦¦à§‡à¦¯à¦¼à¥¤

```
Traditional:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Single Server  â”‚
â”‚  [All Files]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Distributed:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server1 â”‚  â”‚ Server2 â”‚  â”‚ Server3 â”‚
â”‚ [Part1] â”‚  â”‚ [Part2] â”‚  â”‚ [Part3] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘            â†‘            â†‘
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           Appears as one
```

## ğŸ“Š Google File System (GFS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GFS Architecture                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                    â”‚    Master    â”‚                            â”‚
â”‚                    â”‚  (Metadata)  â”‚                            â”‚
â”‚                    â”‚              â”‚                            â”‚
â”‚                    â”‚ - Fileâ†’Chunk â”‚                            â”‚
â”‚                    â”‚   mapping    â”‚                            â”‚
â”‚                    â”‚ - Chunk      â”‚                            â”‚
â”‚                    â”‚   locations  â”‚                            â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                           â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â”‚                 â”‚                 â”‚                  â”‚
â”‚         â†“                 â†“                 â†“                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ChunkServerâ”‚    â”‚ChunkServerâ”‚    â”‚ChunkServerâ”‚             â”‚
â”‚   â”‚           â”‚    â”‚           â”‚    â”‚           â”‚             â”‚
â”‚   â”‚ Chunk 1   â”‚    â”‚ Chunk 2   â”‚    â”‚ Chunk 3   â”‚             â”‚
â”‚   â”‚ Chunk 4   â”‚    â”‚ Chunk 1*  â”‚    â”‚ Chunk 2*  â”‚             â”‚
â”‚   â”‚ Chunk 2*  â”‚    â”‚ Chunk 3*  â”‚    â”‚ Chunk 1*  â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                 â”‚
â”‚   * = Replicas (default 3)                                     â”‚
â”‚   Chunk size: 64 MB                                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Read Flow:
1. Client asks Master for chunk locations
2. Master returns ChunkServer addresses
3. Client reads directly from ChunkServer
```

## ğŸ—ï¸ HDFS (Hadoop Distributed File System)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HDFS Architecture                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Client                                                        â”‚
â”‚     â”‚                                                           â”‚
â”‚     â”‚ 1. Create file                                           â”‚
â”‚     â†“                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚            NameNode                   â”‚                     â”‚
â”‚   â”‚     (Master - Metadata)               â”‚                     â”‚
â”‚   â”‚                                       â”‚                     â”‚
â”‚   â”‚  - File namespace                     â”‚                     â”‚
â”‚   â”‚  - Block mapping                      â”‚                     â”‚
â”‚   â”‚  - Replication management             â”‚                     â”‚
â”‚   â”‚                                       â”‚                     â”‚
â”‚   â”‚  Secondary NameNode (checkpoint)      â”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                      â”‚                                          â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚      â”‚               â”‚               â”‚                         â”‚
â”‚      â†“               â†“               â†“                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚DataNode â”‚    â”‚DataNode â”‚    â”‚DataNode â”‚                    â”‚
â”‚  â”‚         â”‚    â”‚         â”‚    â”‚         â”‚                    â”‚
â”‚  â”‚Block 1  â”‚    â”‚Block 2  â”‚    â”‚Block 3  â”‚                    â”‚
â”‚  â”‚Block 2* â”‚    â”‚Block 1* â”‚    â”‚Block 1* â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚  Block size: 128 MB (default)                                  â”‚
â”‚  Replication: 3 (default)                                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Write Flow:
1. Client requests file creation from NameNode
2. NameNode allocates blocks to DataNodes
3. Client writes blocks in pipeline:
   Client â†’ DN1 â†’ DN2 â†’ DN3
```

## ğŸ’¡ Key Design Decisions

```
Large Block Size (64-128 MB):
âœ“ Reduces metadata
âœ“ Efficient for large files
âœ— Waste for small files

Write-Once-Read-Many:
âœ“ Simpler consistency
âœ“ Good for batch processing
âœ— No random writes

Replication:
âœ“ Fault tolerance
âœ“ Read parallelism
âœ“ Automatic re-replication
```

## ğŸ“š à¦ªà¦°à¦¬à¦°à§à¦¤à§€ à¦Ÿà¦ªà¦¿à¦•

[Object Storage (S3) â†’](./03-object-storage.md)
