# ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ (Availability)

## ЁЯОп ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ ржХрж┐?

**ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐** рж╣рж▓рзЛ рж╕рж┐рж╕рзНржЯрзЗржо ржХрждржЯрж╛ рж╕ржоржпрж╝ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ ржПржмржВ ржЗржЙржЬрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ржпрзЛржЧрзНржп ржерж╛ржХрзЗред

```
рж╕рзВрждрзНрж░:
Availability = (Total Time - Downtime) / Total Time ├Ч 100%

ржЕржержмрж╛:
Availability = MTBF / (MTBF + MTTR)

MTBF = Mean Time Between Failures (ржлрзЗржЗрж▓рж╛рж░рзЗрж░ ржоржзрзНржпржмрж░рзНрждрзА ржЧржбрж╝ рж╕ржоржпрж╝)
MTTR = Mean Time To Recovery (рж░рж┐ржХржнрж╛рж░рж┐рж░ ржЧржбрж╝ рж╕ржоржпрж╝)
```

## ЁЯУК ржирж╛ржЗржирж╕ ржЕржл ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ Availability тФВ Downtime/Year   тФВ Downtime/Day              тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ 90% (1 nine) тФВ рзйрзм.рзл ржжрж┐ржи       тФВ рзи.рзк ржШржирзНржЯрж╛                 тФВ
тФВ 99% (2 nines)тФВ рзй.рзмрзл ржжрж┐ржи       тФВ рззрзк.рзк ржорж┐ржирж┐ржЯ               тФВ
тФВ 99.9% (3)    тФВ рзо.рзнрзм ржШржирзНржЯрж╛     тФВ рзз.рзкрзк ржорж┐ржирж┐ржЯ               тФВ
тФВ 99.99% (4)   тФВ рзлрзи.рзлрзм ржорж┐ржирж┐ржЯ    тФВ рзо.рзмрзк рж╕рзЗржХрзЗржирзНржб            тФВ
тФВ 99.999% (5)  тФВ рзл.рзирзм ржорж┐ржирж┐ржЯ     тФВ рзж.рзорзм рж╕рзЗржХрзЗржирзНржб            тФВ
тФВ 99.9999% (6) тФВ рзйрзз.рзлрзм рж╕рзЗржХрзЗржирзНржб  тФВ рзж.рзжрзорзм рж╕рзЗржХрзЗржирзНржб           тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

### ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг

```
рж╕рж╛рж░рзНржнрж┐рж╕             рж╕рж╛ржзрж╛рж░ржг SLA
тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФА
Amazon EC2         99.99%
Google Cloud       99.99%
Azure              99.99%
Stripe             99.99%
Netflix            99.99%+
Google Search      ~99.999%
```

## ЁЯФД рж╣рж╛ржЗ ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ (HA) ржХрж┐?

**High Availability (HA)** рж╕рж┐рж╕рзНржЯрзЗржо ржПржоржиржнрж╛ржмрзЗ ржбрж┐ржЬрж╛ржЗржи ржХрж░рж╛ ржпрж╛рждрзЗ ржлрзЗржЗрж▓рж╛рж░ рж╣рж▓рзЗржУ рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж▓рзБ ржерж╛ржХрзЗред

### HA ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░
```
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ  рж▓рзЛржб ржмрзНржпрж╛рж▓рж╛ржирзНрж╕рж╛рж░ тФВ
                    тФВ   (Primary)    тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                            тФВ
            тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
            тЖУ               тЖУ               тЖУ
     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
     тФВ Server 1 тФВ    тФВ Server 2 тФВ    тФВ Server 3 тФВ
     тФВ (Active) тФВ    тФВ (Active) тФВ    тФВ (Standby)тФВ
     тФФтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФШ
          тФВ               тФВ               тФВ
          тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                          тЖУ
              тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
              тФВ       Database        тФВ
              тФВ  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФР тФВ
              тФВ  тФВPrimary тФВReplica тФВ тФВ
              тФВ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФШ тФВ
              тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## ЁЯЫбя╕П ржлрзЗржЗрж▓ржУржнрж╛рж░ ржХрзМрж╢рж▓

### рзз. Active-Passive (Hot Standby)
```
рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржЕржмрж╕рзНржерж╛:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   Primary  тФВ     тФВ  Standby   тФВ
тФВ   Active   тФВ     тФВ  Passive   тФВ
тФВ     тЬУ      тФВ     тФВ    тЧЛ       тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
      тЖУ
  All Traffic

ржлрзЗржЗрж▓ржУржнрж╛рж░ ржкрж░рзЗ:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   Primary  тФВ     тФВ  Standby   тФВ
тФВ   Failed   тФВ     тФВ  Active    тФВ
тФВ     тЬЧ      тФВ     тФВ    тЬУ       тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                        тЖУ
                   All Traffic
```

### рзи. Active-Active
```
рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржЕржмрж╕рзНржерж╛:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  Server 1  тФВ     тФВ  Server 2  тФВ
тФВ   Active   тФВ     тФВ   Active   тФВ
тФВ     тЬУ      тФВ     тФВ     тЬУ      тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
      тЖУ                  тЖУ
  50% Traffic       50% Traffic

Server 1 ржлрзЗржЗрж▓:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ  Server 1  тФВ     тФВ  Server 2  тФВ
тФВ   Failed   тФВ     тФВ   Active   тФВ
тФВ     тЬЧ      тФВ     тФВ     тЬУ      тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                        тЖУ
                   100% Traffic
```

### рждрзБрж▓ржирж╛
```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ     ржмрж┐рж╖ржпрж╝        тФВ Active-Passive  тФВ  Active-Active  тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзНржпржмрж╣рж╛рж░ тФВ ржХржо ржжржХрзНрж╖        тФВ ржмрзЗрж╢рж┐ ржжржХрзНрж╖       тФВ
тФВ ржЬржЯрж┐рж▓рждрж╛          тФВ ржХржо              тФВ ржмрзЗрж╢рж┐            тФВ
тФВ ржлрзЗржЗрж▓ржУржнрж╛рж░ рж╕ржоржпрж╝   тФВ ржмрзЗрж╢рж┐ (рж╕рзЗржХрзЗржирзНржб)  тФВ ржХржо (ржорж┐рж▓рж┐рж╕рзЗржХрзЗржирзНржб)тФВ
тФВ ржЦрж░ржЪ             тФВ ржХржо              тФВ ржмрзЗрж╢рж┐            тФВ
тФВ ржбрж╛ржЯрж╛ рж╕рж┐ржЩрзНржХ      тФВ рж╕рж╣ржЬ            тФВ ржЬржЯрж┐рж▓            тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## ЁЯФБ рж░рзЗржбрж╛ржирзНржбрзЗржирзНрж╕рж┐ (Redundancy)

### рж░рзЗржбрж╛ржирзНржбрзЗржирзНрж╕рж┐ рж▓рзЗржнрзЗрж▓
```
рзз. рж╕рж┐ржЩрзНржЧрзЗрж▓ ржкржпрж╝рзЗржирзНржЯ ржЕржл ржлрзЗржЗрж▓рж╛рж░ (SPOF) ржирзЗржЗ
   - ржкрзНрж░рждрж┐ржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржмрзНржпрж╛ржХржЖржк

рзи. ржЬрж┐ржУ-рж░рзЗржбрж╛ржирзНржбрзЗржирзНрж╕рж┐
   - ржмрж┐ржнрж┐ржирзНржи ржбрж╛ржЯрж╛ рж╕рзЗржирзНржЯрж╛рж░рзЗ ржХржкрж┐

рзй. ржорж╛рж▓рзНржЯрж┐-рж░рж┐ржЬрж┐ржУржи
   - ржмрж┐ржнрж┐ржирзНржи ржнрзМржЧрзЛрж▓рж┐ржХ ржЕржЮрзНржЪрж▓рзЗ

рзк. ржорж╛рж▓рзНржЯрж┐-ржХрзНрж▓рж╛ржЙржб
   - ржмрж┐ржнрж┐ржирзНржи ржХрзНрж▓рж╛ржЙржб ржкрзНрж░рзЛржнрж╛ржЗржбрж╛рж░рзЗ
```

### SPOF ржЪрж┐рж╣рзНржирж┐рждржХрж░ржг
```
тЭМ SPOF ржЖржЫрзЗ:
User тЖТ Single Load Balancer тЖТ Single Server тЖТ Single DB
        (SPOF)                  (SPOF)         (SPOF)

тЬЕ SPOF ржирзЗржЗ:
                тФМтФАтФА LB 1 тФАтФАтФР     тФМтФАтФА Server 1 тФАтФАтФР     тФМтФАтФА DB Primary
User тЖТ DNS тФАтЖТ  тФВ          тФВ тЖТ  тФВ              тФВ тЖТ  тФВ
                тФФтФАтФА LB 2 тФАтФАтФШ     тФФтФАтФА Server 2 тФАтФАтФШ     тФФтФАтФА DB Replica
```

## ЁЯУК рж░рзЗржкрзНрж▓рж┐ржХрзЗрж╢ржи

### ржбрж╛ржЯрж╛ржмрзЗрж╕ рж░рзЗржкрзНрж▓рж┐ржХрзЗрж╢ржи
```
рзз. Master-Slave (Primary-Replica)

      тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
      тФВ   Primary    тФВ
      тФВ   (Write)    тФВ
      тФФтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФШ
             тФВ Replication
      тФМтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФР
      тЖУ              тЖУ
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ Replica 1тФВ  тФВ Replica 2тФВ
тФВ  (Read)  тФВ  тФВ  (Read)  тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

рзи. Multi-Master

тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР  тЖРтЖТ  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ Master 1 тФВ      тФВ Master 2 тФВ
тФВ (R/W)    тФВ      тФВ (R/W)    тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ      тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

### рж╕рж┐ржиржХрзНрж░рзЛржирж╛рж╕ vs ржЕрзНржпрж╛рж╕рж┐ржиржХрзНрж░рзЛржирж╛рж╕ рж░рзЗржкрзНрж▓рж┐ржХрзЗрж╢ржи
```
рж╕рж┐ржиржХрзНрж░рзЛржирж╛рж╕:
Client тЖТ Primary тЖТ Replica тЖТ Ack тЖТ Client
                          тЖС
              рж╕ржм рж░рзЗржкрзНрж▓рж┐ржХрж╛ржпрж╝ рж░рж╛ржЗржЯ рж╣ржУржпрж╝рж╛ ржкрж░рзНржпржирзНржд ржЕржкрзЗржХрзНрж╖рж╛
рж╕рзБржмрж┐ржзрж╛: рж╕рзНржЯрзНрж░ржВ ржХржирж╕рж┐рж╕рзНржЯрзЗржирзНрж╕рж┐
ржЕрж╕рзБржмрж┐ржзрж╛: рж╕рзНрж▓рзЛ, рж▓рзЗржЯрзЗржирзНрж╕рж┐ ржмрзЗрж╢рж┐

ржЕрзНржпрж╛рж╕рж┐ржиржХрзНрж░рзЛржирж╛рж╕:
Client тЖТ Primary тЖТ Ack тЖТ Client
              тЖУ
           Replica (ржкрж░рзЗ)
рж╕рзБржмрж┐ржзрж╛: ржлрж╛рж╕рзНржЯ
ржЕрж╕рзБржмрж┐ржзрж╛: ржбрж╛ржЯрж╛ рж▓рж╕ рж╣рждрзЗ ржкрж╛рж░рзЗ
```

## ЁЯПе рж╣рзЗрж▓рже ржЪрзЗржХ

### рж╣рзЗрж▓рже ржЪрзЗржХ ржЯрж╛ржЗржк
```
рзз. Shallow Health Check
   - рж╕рж╛рж░рзНржнрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕ ржХрж░ржЫрзЗ ржХрж┐ржирж╛
   - GET /health тЖТ 200 OK

рзи. Deep Health Check
   - ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрж╛ржирзЗржХрж╢ржи
   - ржХрзНржпрж╛рж╢ ржХрж╛ржирзЗржХрж╢ржи
   - ржПржХрзНрж╕ржЯрж╛рж░рзНржирж╛рж▓ рж╕рж╛рж░рзНржнрж┐рж╕

ржЙржжрж╛рж╣рж░ржг:
GET /health/live тЖТ рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ
GET /health/ready тЖТ рж╕ржм ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржарж┐ржХ
```

### рж▓рзЛржб ржмрзНржпрж╛рж▓рж╛ржирзНрж╕рж╛рж░ рж╣рзЗрж▓рже ржЪрзЗржХ
```
                    Load Balancer
                         тФВ
          тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
          тФВ              тФВ              тФВ
          тЖУ              тЖУ              тЖУ
     тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР   тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР   тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
     тФВ Server1 тФВ   тФВ Server2 тФВ   тФВ Server3 тФВ
     тФВ   тЬУ     тФВ   тФВ    тЬУ    тФВ   тФВ    тЬЧ    тФВ
     тФВ Healthy тФВ   тФВ Healthy тФВ   тФВUnhealthyтФВ
     тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
          тЖС              тЖС
    Traffic рж░рж╛ржЙржЯ     Traffic рж░рж╛ржЙржЯ
                         
Server 3 ржерзЗржХрзЗ Traffic рж╕рж░рж┐ржпрж╝рзЗ ржирзЗржУржпрж╝рж╛ рж╣ржпрж╝
```

## ЁЯФз ржлрж▓рзНржЯ ржЯрж▓рж╛рж░рзЗржирзНрж╕

### ржЧрзНрж░рзЗрж╕ржлрзБрж▓ ржбрж┐ржЧрзНрж░рзЗржбрзЗрж╢ржи
```
рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржлрзЗржЗрж▓ ржирж╛ ржХрж░рзЗ ржкрж╛рж░рзНрж╢рж┐ржпрж╝рж╛рж▓ ржлрж┐ржЪрж╛рж░ ржмржирзНржз ржХрж░рж╛:

рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ:
- рж╕ржм ржлрж┐ржЪрж╛рж░ ржЪрж╛рж▓рзБ
- рж░рж┐ржХржорзЗржирзНржбрзЗрж╢ржи ржЗржЮрзНржЬрж┐ржи ржХрж╛ржЬ ржХрж░ржЫрзЗ
- рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржЖржкржбрзЗржЯ

рж▓рзЛржб ржмрзЗрж╢рж┐ рж╣рж▓рзЗ:
- ржХрзЛрж░ ржлрж┐ржЪрж╛рж░ ржЪрж╛рж▓рзБ тЬУ
- рж░рж┐ржХржорзЗржирзНржбрзЗрж╢ржи ржмржирзНржз тЬЧ
- ржХрзНржпрж╛рж╢ржб ржбрж╛ржЯрж╛ ржжрзЗржЦрж╛ржирзЛ
```

### рж╕рж╛рж░рзНржХрж┐ржЯ ржмрзНрж░рзЗржХрж╛рж░ ржкрзНржпрж╛ржЯрж╛рж░рзНржи
```
           тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
           тФВ Circuit Breaker тФВ
           тФФтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                    тФВ
    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
    тФВ               тФВ               тФВ
CLOSED          OPEN           HALF-OPEN
(рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ)     (ржмрзНрж▓ржХ)         (ржЯрзЗрж╕рзНржЯ)
    тФВ               тФВ               тФВ
рж╕ржм рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ    рж╕ржм рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ    ржХрж┐ржЫрзБ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ
ржкрж╛рж╕ ржХрж░рзЗ        ржмрзНрж▓ржХ рж╣ржпрж╝        ржкрж╛рж╕ ржХрж░рзЗ

CLOSED: рж╕рж╛рж░рзНржнрж┐рж╕ ржХрж╛ржЬ ржХрж░ржЫрзЗ
OPEN: рж╕рж╛рж░рзНржнрж┐рж╕ ржбрж╛ржЙржи, рж╕ржм рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржмрзНрж▓ржХ
HALF-OPEN: ржХрж┐ржЫрзБ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржжрж┐ржпрж╝рзЗ ржЯрзЗрж╕рзНржЯ
```

## ЁЯУЛ SLA, SLO, SLI

```
SLI (Service Level Indicator)
тФЬтФАтФА ржкрж░рж┐ржорж╛ржкржпрзЛржЧрзНржп ржорзЗржЯрзНрж░рж┐ржХ
тФЬтФАтФА ржЙржжрж╛рж╣рж░ржг: рж░рзЗрж╕ржкржирзНрж╕ ржЯрж╛ржЗржо, ржПрж░рж░ рж░рзЗржЯ

SLO (Service Level Objective)
тФЬтФАтФА SLI-ржПрж░ ржЯрж╛рж░рзНржЧрзЗржЯ ржнрзНржпрж╛рж▓рзБ
тФЬтФАтФА ржЙржжрж╛рж╣рж░ржг: 99.9% рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ < 200ms

SLA (Service Level Agreement)
тФЬтФАтФА ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржЪрзБржХрзНрждрж┐
тФЬтФАтФА SLO ржнржЩрзНржЧ рж╣рж▓рзЗ ржкрзЗржирж╛рж▓рзНржЯрж┐
```

### ржЙржжрж╛рж╣рж░ржг
```
SLI: ржкрзНрж░рждрж┐ ржорж╛рж╕рзЗ ржЖржкржЯрж╛ржЗржо ржкрж╛рж░рзНрж╕рзЗржирзНржЯрзЗржЬ
SLO: 99.9% ржЖржкржЯрж╛ржЗржо
SLA: 99.9% ржПрж░ ржирж┐ржЪрзЗ ржЧрзЗрж▓рзЗ ржХрзНрж░рзЗржбрж┐ржЯ ржжрзЗржУржпрж╝рж╛ рж╣ржмрзЗ

тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   ржЖржкржЯрж╛ржЗржо    тФВ     ржХрзНрж░рзЗржбрж┐ржЯ       тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ < 99.9%      тФВ рззрзж% ржХрзНрж░рзЗржбрж┐ржЯ      тФВ
тФВ < 99.5%      тФВ рзирзл% ржХрзНрж░рзЗржбрж┐ржЯ      тФВ
тФВ < 99.0%      тФВ рзлрзж% ржХрзНрж░рзЗржбрж┐ржЯ      тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## ЁЯЫая╕П HA ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи ржЯрзЗржХржирж┐ржХ

### рзз. ржбрж╛ржЯрж╛ржмрзЗрж╕ HA
```
PostgreSQL:
- Streaming Replication
- Patroni Cluster

MySQL:
- Master-Slave Replication
- MySQL Group Replication
- Galera Cluster

MongoDB:
- Replica Set
```

### рзи. ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи HA
```
- Kubernetes Deployment
- Auto-scaling Groups
- Container Orchestration
```

### рзй. ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ HA
```
- DNS Failover
- Anycast
- BGP Routing
```

## тЬЕ HA ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

- [ ] SPOF ржЪрж┐рж╣рзНржирж┐ржд ржУ ржжрзВрж░ ржХрж░рж╛
- [ ] ржЕржЯрзЛржорзЗржЯрж┐ржХ ржлрзЗржЗрж▓ржУржнрж╛рж░ рж╕рзЗржЯржЖржк
- [ ] рж╣рзЗрж▓рже ржЪрзЗржХ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛
- [ ] ржбрж╛ржЯрж╛ рж░рзЗржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЯржЖржк
- [ ] ржмрзНржпрж╛ржХржЖржк ржУ рж░рж┐ржХржнрж╛рж░рж┐ ржкрзНрж▓рзНржпрж╛ржи
- [ ] ржоржирж┐ржЯрж░рж┐ржВ ржУ ржЕрзНржпрж╛рж▓рж╛рж░рзНржЯ рж╕рзЗржЯржЖржк
- [ ] ржбрж┐ржЬрж╛рж╕рзНржЯрж╛рж░ рж░рж┐ржХржнрж╛рж░рж┐ ржЯрзЗрж╕рзНржЯ
- [ ] ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи ржЖржкржбрзЗржЯ

## ЁЯУЪ ржкрж░ржмрж░рзНрждрзА ржЯржкрж┐ржХ

[CAP ржерж┐ржУрж░рзЗржо тЖТ](./06-cap-theorem.md)
